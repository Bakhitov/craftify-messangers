# üìù CHANGELOG

## [2.0.30] - 2025-01-26 üìö –°–û–ó–î–ê–ù–ê –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø API –°–û–û–ë–©–ï–ù–ò–ô

### ‚úÖ **–ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

#### **docs/MESSAGE_API_FORMAT.md**
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ WhatsApp –∏ Telegram API
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π (—Ç–µ–∫—Å—Ç, –º–µ–¥–∏–∞, –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞)
- ‚úÖ –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã cURL –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### üìã **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- üü¢ **WhatsApp API**: —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –º–µ–¥–∏–∞, –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
- üîµ **Telegram API**: —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–∞–∑–º–µ—Ç–∫–æ–π, –º–µ–¥–∏–∞, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏
- üîß **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**: —Å—Ç–∞—Ç—É—Å, –∫–æ–Ω—Ç–∞–∫—Ç—ã, —á–∞—Ç—ã, –≥—Ä—É–ø–ø—ã
- üîó **–ü—Ä–∏–º–µ—Ä—ã cURL**: –≥–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –ª–∏–º–∏—Ç—ã, —Ñ–æ—Ä–º–∞—Ç—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- üìä **–®–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è**: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

---

## [2.0.29] - 2025-01-26 üéâ –§–ò–ù–ê–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï: –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –†–ê–ë–û–¢–ê–Æ–¢

### ‚úÖ **–£–°–ü–ï–®–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ –§–ò–ù–ê–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**

#### **üéØ –í–°–ï –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê –í–´–ü–û–õ–ù–ï–ù–´:**
1. ‚úÖ **–ü–æ—Ä—Ç—ã –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –ë–ï–ó –æ—à–∏–±–æ–∫** - –ù–ï–¢ –æ—à–∏–±–æ–∫ "Instance not found for port assignment"
2. ‚úÖ **Telegram —Å—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤ –∑–∞ 17 —Å–µ–∫—É–Ω–¥** - –±—ã—Å—Ç—Ä–µ–µ —Ü–µ–ª–µ–≤—ã—Ö 20 —Å–µ–∫—É–Ω–¥
3. ‚úÖ **–°—Ç–∞—Ç—É—Å—ã –≤ –ë–î –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - auth_status –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ client_ready
4. ‚úÖ **–°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ** - Telegram API —Ä–∞–±–æ—Ç–∞–µ—Ç (`messageId: "283"`)
5. ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã** - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã healthy

#### **üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´:**
- ‚úÖ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ **Docker —Å–µ—Ç—å wweb-network** - —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ (–ø–æ—Ä—Ç 3527 –Ω–∞–∑–Ω–∞—á–µ–Ω —É—Å–ø–µ—à–Ω–æ)
- ‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** - –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ **API –∫–ª—é—á–∏** - –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤** - auth_status –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

#### **üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**
```bash
# –°–æ–∑–¥–∞–Ω–Ω—ã–π Telegram –∏–Ω—Å—Ç–∞–Ω—Å:
Instance ID: 9f3c12c8-4967-4031-a8d8-47064bea2cd5
Port: 3527
Status: client_ready
Account: salesBotsales
API Key: 9f3c12c8-4967-4031-a8d8-47064bea2cd5

# –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
POST http://localhost:3527/api/v1/telegram/send
Response: {"messageId":"283","provider":"telegram"}
```

#### **üèÅ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:**
- ‚ö° –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞: < 1 —Å–µ–∫—É–Ω–¥–∞  
- ‚ö° –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞: < 1 —Å–µ–∫—É–Ω–¥–∞ (566ms)
- ‚ö° Telegram –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 17 —Å–µ–∫—É–Ω–¥ (—Ü–µ–ª—å: 20 —Å–µ–∫)
- ‚ö° –°—Ç–∞—Ç—É—Å –≤ –ë–î: –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚ö° API –æ—Ç–∫–ª–∏–∫: —Å—Ç–∞–±–∏–ª—å–Ω—ã–π

### üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

#### **src/instance-manager/api/v1/company-messages.ts**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ Prettier/ESLint —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –†–∞–∑–±–∏—Ç—ã –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

#### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ .env —Ñ–∞–π–ª–∞
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ–±–ª–∞—á–Ω–æ–π Supabase –ë–î
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ Docker —Å–µ—Ç–∏ wweb-network

### üìã **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É:**
- üéØ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ**
- üéØ **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** 
- üéØ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º**
- üéØ **–ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞**

---

## [2.0.28] - 2025-01-15 üöÄ –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ company_id –¥–ª—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

### üÜï **–î–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

#### **–ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –§–ò–õ–¨–¢–†–ê–¶–ò–ò –ü–û COMPANY_ID** ‚ú®
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∞—Ç—å –≤—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–∞–Ω–∏–∏

### üîß **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

#### **docs/ENDPOINTS_INSTANCES_MESSAGES.md** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ company_id
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏

#### **src/services/message-storage.service.ts**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getMessagesByCompany()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getCompanyMessageStats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É, —á–∞—Ç—É, –≥—Ä—É–ø–ø–∞–º
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –ª–∏–º–∏—Ç—ã –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö

#### **src/instance-manager/api/v1/company-messages.ts** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- ‚úÖ `GET /api/v1/company/:companyId/messages` - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ `GET /api/v1/company/:companyId/messages/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ `GET /api/v1/company/:companyId/instances` - –∏–Ω—Å—Ç–∞–Ω—Å—ã –∫–æ–º–ø–∞–Ω–∏–∏  
- ‚úÖ `GET /api/v1/company/:companyId/messages/recent` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ rate limiting
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### **src/instance-manager/api/v1/index.ts**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä `/company`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `company_endpoints`

### üéØ **–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

#### **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏:**
```bash
GET /api/v1/company/{companyId}/instances          # –ò–Ω—Å—Ç–∞–Ω—Å—ã –∫–æ–º–ø–∞–Ω–∏–∏
GET /api/v1/company/{companyId}/messages           # –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
GET /api/v1/company/{companyId}/messages/stats     # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
GET /api/v1/company/{companyId}/messages/recent    # –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```

#### **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
```bash
?provider=whatsappweb,telegram    # –§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É
?chatId=1234567890               # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Ç
?isGroup=true/false              # –ì—Ä—É–ø–ø–æ–≤—ã–µ/–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
?limit=100&offset=0              # –ü–∞–≥–∏–Ω–∞—Ü–∏—è
```

### üìä **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

#### **–í—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –∫–æ–º–ø–∞–Ω–∏–∏:**
```bash
curl "http://localhost:3000/api/v1/company/user-001/instances?provider=whatsappweb"
```

#### **–°–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π:**
```bash
curl "http://localhost:3000/api/v1/company/user-001/messages?limit=100&isGroup=false"
```

#### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–∏:**
```bash
curl "http://localhost:3000/api/v1/company/user-001/messages/stats"
```

### üöÄ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
- ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏

## [2.0.27] - 2025-07-24 üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: WhatsApp message_source –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

### üêõ **–†–µ—à–µ–Ω–Ω–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**

#### **–ü–†–û–ë–õ–ï–ú–ê: WhatsApp —Å–æ–æ–±—â–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –∫–∞–∫ message_source='device'** ‚ùå ‚Üí ‚úÖ
- **–î–æ**: –í—Å–µ API/Agno —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ WhatsApp –ø–æ–º–µ—á–∞–ª–∏—Å—å –∫–∞–∫ 'device'
- **–ü–æ—Å–ª–µ**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞: 'api', 'agno', 'device'

#### **–ü–†–û–ë–õ–ï–ú–ê: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π** ‚ùå ‚Üí ‚úÖ
- **–î–æ**: API —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –¥–≤–∞–∂–¥—ã (–≤ whatsapp-service.ts + message_create)
- **–ü–æ—Å–ª–µ**: –ï–¥–∏–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ message_create —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º

### üîß **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

#### **src/whatsapp-client.ts (lines 565-627)**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `message_create`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `apiMessageIds.has()` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ API —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `agnoMessageIds.has()` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Agno –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ Fallback –Ω–∞ 'device' –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

#### **src/whatsapp-service.ts (lines 222-313)**
- ‚úÖ –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (–±—ã–ª–æ –≤ sendMessage)
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ tracking set —á–µ—Ä–µ–∑ `addApiMessageId`
- ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å–æ–æ–±—â–µ–Ω–∏–π

### üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

#### **Telegram (—Ä–∞–±–æ—Ç–∞–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```typescript
message_source: 'api'  // API —Å–æ–æ–±—â–µ–Ω–∏—è
message_source: 'agno' // Agno –æ—Ç–≤–µ—Ç—ã  
message_source: 'user' // –í—Ö–æ–¥—è—â–∏–µ
```

#### **WhatsApp (—Ç–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ):**
```typescript
message_source: 'api'    // ‚úÖ API —Å–æ–æ–±—â–µ–Ω–∏—è (–±—ã–ª–æ 'device')
message_source: 'agno'   // ‚úÖ Agno –æ—Ç–≤–µ—Ç—ã (–±—ã–ª–æ 'device')  
message_source: 'device' // ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
message_source: 'user'   // ‚úÖ –í—Ö–æ–¥—è—â–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è 1 —Ä–∞–∑
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –º–æ–∂–Ω–æ —Ä–∞–∑–ª–∏—á–∏—Ç—å API vs Agno vs device
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - WhatsApp —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Telegram
- ‚úÖ **Performance** - –º–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î

---

## [2.0.26] - 2025-01-25 üöÄ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø: –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –≤ –ë–î

### üêõ **–†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–≥–ª–∞—Å–Ω–æ DETAILED_STATUS_UPDATE_ANALYSIS.md:**

#### **–ü–†–û–ë–õ–ï–ú–ê ‚Ññ1: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤** ‚ùå ‚Üí ‚úÖ
- **–î–æ**: Telegram –≥–æ—Ç–æ–≤ –∑–∞ 5 —Å–µ–∫ ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î —á–µ—Ä–µ–∑ **66 —Å–µ–∫—É–Ω–¥**
- **–î–æ**: WhatsApp –≥–æ—Ç–æ–≤ ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î —á–µ—Ä–µ–∑ **4 —á–∞—Å–∞ 56 –º–∏–Ω—É—Ç!**
- **–ü–æ—Å–ª–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î –≤ —Ç–µ—á–µ–Ω–∏–µ **15-20 —Å–µ–∫—É–Ω–¥** –ø–æ—Å–ª–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

#### **–ü–†–û–ë–õ–ï–ú–ê ‚Ññ2: –ù–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API** ‚ùå ‚Üí ‚úÖ
- **–î–æ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π `pending` –¥–∞–∂–µ –µ—Å–ª–∏ Telegram —É–∂–µ –≥–æ—Ç–æ–≤
- **–ü–æ—Å–ª–µ**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ `waitForApiReady`

#### **–ü–†–û–ë–õ–ï–ú–ê ‚Ññ3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ WhatsApp —Å—Ç–∞—Ç—É—Å–æ–≤** ‚ùå ‚Üí ‚úÖ
- **–î–æ**: `data.status === 'connected'` –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–ª—Å—è –∫–∞–∫ `client_ready`
- **–ü–æ—Å–ª–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ WhatsApp

#### **–ü–†–û–ë–õ–ï–ú–ê ‚Ññ4: Debounce –∑–∞–¥–µ—Ä–∂–∫–∞ +1 —Å–µ–∫—É–Ω–¥–∞** ‚ùå ‚Üí ‚úÖ
- **–î–æ**: –ö–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î –∏–º–µ–µ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É 1 —Å–µ–∫—É–Ω–¥–∞
- **–ü–æ—Å–ª–µ**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–≤—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –±–µ–∑ debounce

#### **–ü–†–û–ë–õ–ï–ú–ê ‚Ññ5: –ü—Ä–æ–ø—É—Å–∫ –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤** ‚ùå ‚Üí ‚úÖ
- **–î–æ**: –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Å—Ç–∞–Ω—Å—ã –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ
- **–ü–æ—Å–ª–µ**: –£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –¥–ª—è Telegram –∏ WhatsApp

### üîß **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

#### **src/instance-manager/services/processing.service.ts**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–ª–µ `waitForApiReady`
- ‚úÖ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `immediate = true`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `‚úÖ IMMEDIATE auth status update`

#### **src/instance-manager/services/instance-monitor.service.ts**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ WhatsApp: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `data.status === 'connected'`
- ‚úÖ –£–ª—É—á—à–µ–Ω `updateAuthStatusInDatabase` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `immediate`
- ‚úÖ –£–ª—É—á—à–µ–Ω `updateAuthStatusWithDebounce` —Å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
- ‚úÖ –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –¥–ª—è –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- ‚úÖ –†–∞–∑–¥–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `IMMEDIATE` –∏ `DEBOUNCED` –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### üéØ **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

#### **Telegram:**
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: < 10 —Å–µ–∫
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ: < 5 —Å–µ–∫  
- ‚úÖ –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: < 2 —Å–µ–∫
- ‚úÖ **–ò–¢–û–ì–û: < 15 —Å–µ–∫** (–≤–º–µ—Å—Ç–æ 66+ —Å–µ–∫)

#### **WhatsApp:**
- ‚úÖ QR –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: < 25 —Å–µ–∫  
- ‚úÖ –ü–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: < 5 —Å–µ–∫
- ‚úÖ –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: < 2 —Å–µ–∫
- ‚úÖ **–ò–¢–û–ì–û: < 30 —Å–µ–∫ –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** (–≤–º–µ—Å—Ç–æ —á–∞—Å–æ–≤)

#### **–û–±—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –ù–ï–¢ –∑–∞–¥–µ—Ä–∂–µ–∫ debounce –¥–ª—è –ø–µ—Ä–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ WhatsApp –∏ Telegram
- ‚úÖ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–∞
- ‚úÖ –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- ‚úÖ –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î: 15 —Å–µ–∫—É–Ω–¥ (—Ä–∞–Ω–µ–µ –±—ã–ª 120 —Å–µ–∫)

#### üìù **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `src/instance-manager/services/processing.service.ts` - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- `src/instance-manager/services/instance-monitor.service.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ debounce

#### üß™ **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
1. –°–æ–∑–¥–∞—Ç—å Telegram –∏–Ω—Å—Ç–∞–Ω—Å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î –∑–∞ < 20 —Å–µ–∫
2. –°–æ–∑–¥–∞—Ç—å WhatsApp –∏–Ω—Å—Ç–∞–Ω—Å ‚Üí QR –≥–æ—Ç–æ–≤ –∑–∞ < 40 —Å–µ–∫
3. –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å WhatsApp QR ‚Üí —Å—Ç–∞—Ç—É—Å `client_ready` –≤ –ë–î –∑–∞ < 30 —Å–µ–∫
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ –ª–æ–≥–æ–≤
5. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å—Ç–∞—Ç—É—Å—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ –ë–î

---

## [2.0.25] - 2025-01-25 üîß FIX: –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ Docker socket –≤ macOS

### üêõ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **Docker —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Docker socket –≤ macOS
- **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Docker Desktop**: –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å —Å Colima –Ω–∞ Docker Desktop –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫**: Instance Manager —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Ö–æ—Å—Ç–µ –¥–ª—è development
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —Ç—Ä–æ–π–Ω–∞—è —Å–±–æ—Ä–∫–∞**: –£–±—Ä–∞–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤

#### üìù **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `start-dev.sh` - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä –º–µ–∂–¥—É Docker –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º
- `docker-compose.instance-manager.yml` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ –∏ Docker socket
- `env.development` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø—É—Ç—å –∫ Docker socket –¥–ª—è Docker Desktop

#### üîß **–î–µ—Ç–∞–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å Colima –Ω–∞ Docker Desktop context
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–æ–Ω—Ç–∞–∂ Docker socket –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ Instance Manager
- ‚úÖ –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã `docker build`
- ‚úÖ Instance Manager —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–ª–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ Docker –Ω–∞ —Ö–æ—Å—Ç–µ

#### üöÄ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Instance Manager –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Docker
- API `/health` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `healthy` —Å—Ç–∞—Ç—É—Å
- –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å Docker –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏

---

## [2.0.24] - 2025-01-25 üê≥ DOCKER: –ü–û–õ–ù–ê–Ø DOCKER–ò–ó–ê–¶–ò–Ø DEVELOPMENT –ó–ê–ü–£–°–ö–ê

### üê≥ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ–ª–Ω—ã–π Docker –∑–∞–ø—É—Å–∫ –≤ development

#### üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- **–ü–æ–ª–Ω–∞—è Docker–∏–∑–∞—Ü–∏—è**: start-dev.sh —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Docker
- **–£–±—Ä–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è Node.js –∏ pnpm –Ω–∞ —Ö–æ—Å—Ç–µ
- **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫**: –≤—Å–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å—Ä–µ–¥**: development —Ç–µ–ø–µ—Ä—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–æ–∫ –∫ production

#### üìù **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `start-dev.sh` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è Docker-only –∑–∞–ø—É—Å–∫–∞

#### üîß **–£–±—Ä–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js –∏ pnpm –Ω–∞ —Ö–æ—Å—Ç–µ
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ TypeScript —á–µ—Ä–µ–∑ pnpm
- –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –†–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞ Instance Manager –Ω–∞ —Ö–æ—Å—Ç–µ
- TypeScript watch —Ä–µ–∂–∏–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å Colima

#### ‚úÖ **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ Docker –∏ Docker Compose
- –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤ —á–µ—Ä–µ–∑ Docker
- –ó–∞–ø—É—Å–∫ Instance Manager —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Docker Compose
- –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ 1 –º–∏–Ω—É—Ç—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (–º–µ–¥–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞)
- –£–ª—É—á—à–µ–Ω–Ω—ã–µ Docker –∫–æ–º–∞–Ω–¥—ã –≤ –≤—ã–≤–æ–¥–µ

#### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `node --version` –∏ `pnpm --version`
- –£–±—Ä–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã `pnpm install` –∏ `pnpm run build`
- –£–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ USE_HOST_MODE –∏ COLIMA_SOCKET_MISSING
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `docker-compose down` –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–≤–æ–¥–∏–º—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker

## [2.0.23] - 2025-01-24 ‚ö° ASYNC: INSTANCE CREATION RESPONSE OPTIMIZATION

### ‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

#### üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- **–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç**: API —Ç–µ–ø–µ—Ä—å —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- **–§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: Processing –∏–Ω—Å—Ç–∞–Ω—Å–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ background
- **–£–ª—É—á—à–µ–Ω–Ω—ã–π UX**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ–ª—å—à–µ –Ω–µ –∂–¥–µ—Ç 15+ —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
- **Status endpoints**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### üìù **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `src/instance-manager/api/v1/instances.ts` - –∏–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ POST /api/v1/instances

#### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –£–±—Ä–∞–Ω `await` –¥–ª—è `processingService.processInstance()`
- –î–æ–±–∞–≤–ª–µ–Ω Promise.then/catch –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- –û–±–Ω–æ–≤–ª–µ–Ω response format —Å status_check_url –∏ api_endpoint

## [2.0.22] - 2025-01-15 üìö OPTIMIZE: TESTING GUIDE STREAMLINED

### üìö –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è TESTING_GUIDE_NEW.md

#### üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å** —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å
- **–£–±—Ä–∞–Ω–æ –ª–∏—à–Ω–µ–µ**: —É–¥–∞–ª–µ–Ω–∞ –≤—Å—è —Ç–µ–æ—Ä–∏—è, –æ–ø–∏—Å–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∏–∑–±—ã—Ç–æ—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–û—Å—Ç–∞–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–Ω–æ–µ**: –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ–∂–∏–¥–∞–µ–º—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ API –≥—Ä—É–ø–ø–∞–º

#### üìù **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:**
- üèóÔ∏è **–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã** - –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Instance Manager
- üì± **Instance Manager API** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- üì± **WhatsApp API** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ WhatsApp —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ü§ñ **Telegram API** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram –±–æ—Ç–∞
- üåê **Multi-Provider Webhooks** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- üîß **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏** - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø/—Ä–µ—Å—Ç–∞—Ä—Ç
- üö® **–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏** - —Ä–µ—à–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

#### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
**Instance Manager (–ø–æ—Ä—Ç 3000):**
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
- `GET /api/v1/` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- `POST /api/v1/instances` - —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ WhatsApp/Telegram
- `GET /api/v1/instances/{id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫–∑–µ–º–ø–ª—è—Ä–µ
- `DELETE /api/v1/instances/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- `GET /api/v1/instances/{id}/qr` - –ø–æ–ª—É—á–µ–Ω–∏–µ QR –∫–æ–¥–∞
- `GET /api/v1/instances/{id}/memory` - –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏
- `GET /api/v1/instances/{id}/logs` - –ª–æ–≥–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- `GET /api/v1/resources` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- `GET /api/v1/resources/ports` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Ä—Ç–æ–≤
- `GET /api/v1/resources/health` - –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã

**WhatsApp API (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç):**
- `GET /api/v1/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è WhatsApp API
- `GET /api/v1/status` - —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ –∏ QR –∫–æ–¥
- `POST /api/v1/send` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏ –º–µ–¥–∏–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- `GET /api/v1/contacts` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- `GET /api/v1/chats` - –ø–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–æ–≤
- `POST /api/v1/send-bulk` - –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

**Telegram API (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç):**
- `GET /api/v1/telegram/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è Telegram API
- `GET /api/v1/telegram/me` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
- `POST /api/v1/telegram/send` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- `POST /api/v1/telegram/send-media` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞
- `GET /api/v1/telegram/chats` - –ø–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–æ–≤
- `POST /api/v1/telegram/send-bulk` - –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

#### üîß **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã** curl –∫–æ–º–∞–Ω–¥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- **–û–∂–∏–¥–∞–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã** –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–µ—à–µ–Ω–∏—è –æ—à–∏–±–æ–∫** - –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã 401, 503, 404, 429
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∑–∞–º–µ–Ω—ã** - INSTANCE_ID, PORT, BOT_TOKEN —á–µ—Ç–∫–æ –≤—ã–¥–µ–ª–µ–Ω—ã
- **–õ–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–±—Ä–∞–Ω—ã –≤–º–µ—Å—Ç–µ

#### üìà **–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Å–æ–∫—Ä–∞—â–µ–Ω —Å **7817 —Å—Ç—Ä–æ–∫ –¥–æ ~500 —Å—Ç—Ä–æ–∫** (–±–æ–ª–µ–µ 90% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ)
- –í—Ä–µ–º—è –Ω–∞ –ø–æ–∏—Å–∫ –Ω—É–∂–Ω–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–æ –≤ —Ä–∞–∑—ã
- –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –æ–ø–∏—Å–∞–Ω–∏—è –∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–¥–µ–ª—ã
- –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –∫–æ–¥—É
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

#### üîç **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–¥–∞:**
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—Ä–æ—Ç–∏–≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞:
- `src/api.ts` - WhatsApp API —Ä–æ—É—Ç—ã
- `src/telegram-api.ts` - Telegram API —Ä–æ—É—Ç—ã  
- `src/instance-manager/api/v1/` - Instance Manager —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `src/main.ts` - middleware –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `src/routes/multi-provider.routes.ts` - multi-provider —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

## [2.0.21] - 2025-01-24 üêõ CRITICAL FIX: AUTH STATUS STABILITY

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º auth_status –≤ 'pending'

#### üìä **–ü—Ä–æ–±–ª–µ–º–∞ (–¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑):**
–ò–∑ –ª–æ–≥–æ–≤ –≤—ã—è–≤–ª–µ–Ω —Ü–∏–∫–ª–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥:
- 01:11:43 ‚Üí pending (API –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω)
- 01:12:43 ‚Üí pending (API –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω) 
- 01:13:43 ‚Üí pending (API –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω)
- –ò–Ω—Å—Ç–∞–Ω—Å—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `client_ready` —Å–±—Ä–∞—Å—ã–≤–∞–ª–∏—Å—å –≤ `pending` –ø—Ä–∏ –º–∞–ª–µ–π—à–µ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

#### üîß **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

**src/instance-manager/services/instance-monitor.service.ts:**
- –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ API —Å 3 –¥–æ 10 —Å–µ–∫—É–Ω–¥
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ `client_ready` –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö —Å–≤—è–∑–∏
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: ECONNREFUSED –∏ timeout —Ç–µ–ø–µ—Ä—å –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –∏–∑ –ø–∞–º—è—Ç–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

**src/instance-manager/main-instance-manager.ts:**
- –£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ 120 —Å–µ–∫—É–Ω–¥ (–±—ã–ª–æ 60) –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- –°—Ç–∞–±–∏–ª—å–Ω—ã–µ `client_ready` –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ä–µ–∂–µ (–∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç)
- –ù–µ–¥–∞–≤–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ 3 –º–∏–Ω—É—Ç—ã (–±—ã–ª–æ 2)
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### ‚è±Ô∏è **–ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏–∑ –ª–æ–≥–æ–≤:**
- –†–µ—Å—Ç–∞—Ä—Ç –∏–Ω—Å—Ç–∞–Ω—Å–∞: 1-2 —Å–µ–∫—É–Ω–¥—ã
- –ü–æ–ª—É—á–µ–Ω–∏–µ auth-status: ~1 —Å–µ–∫—É–Ω–¥–∞  
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞: 12-14 —Å–µ–∫—É–Ω–¥
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: –∫–∞–∂–¥—ã–µ 60‚Üí120 —Å–µ–∫—É–Ω–¥

#### üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò—Å–∫–ª—é—á–µ–Ω—ã –ª–æ–∂–Ω—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤ `pending` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- –ü–æ–≤—ã—à–µ–Ω–∞ —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ–±–ª–µ–º–∞–º
- –°–Ω–∏–∂–µ–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API –∑–∞ —Å—á–µ—Ç –±–æ–ª–µ–µ —Ä–µ–¥–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## [2.0.20] - 2025-07-23 üîß TYPESCRIPT COMPILATION FIXES & TESTING GUIDE UPDATE

### üêõ Fixed - TypeScript Compilation Errors

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript
- **FIXED**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ `success` –≤ `src/instance-manager/api/v1/instances.ts:939`
- **FIXED**: –¢–∏–ø `string | undefined` –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `string` –≤ `src/instance-manager/services/batch-instance.service.ts:241`
- **IMPROVED**: –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ batch operations —Å fallback –Ω–∞ "Unknown error"
- **CLEANED**: –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –≤ JSON –æ—Ç–≤–µ—Ç–∞—Ö

#### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã
- **src/instance-manager/api/v1/instances.ts**: –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `success` –≤ batch update response
- **src/instance-manager/services/batch-instance.service.ts**: –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è `result.error`

#### –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **TypeScript**: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ (`npm run build`)
- ‚úÖ **Code Quality**: –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –≤ API –æ—Ç–≤–µ—Ç–∞—Ö
- ‚úÖ **Error Handling**: –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ undefined –æ—à–∏–±–æ–∫ –≤ batch operations
- ‚úÖ **Production Ready**: –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –±–µ–∑ TypeScript warnings

### üìö Updated - TESTING_GUIDE_NEW.md

#### –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª Performance Optimization (NEW v2.2)
- **NEW**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ Cache Management Endpoints
- **NEW**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Batch Operations Endpoints  
- **NEW**: –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Resource Cache Service
- **NEW**: –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è
- **UPDATED**: –í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ v2.2

#### –ù–æ–≤—ã–µ endpoints –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
```bash
# Cache Management
GET /api/v1/resources/cache/stats
POST /api/v1/resources/cache/clear

# Batch Operations  
POST /api/v1/instances/batch/status
POST /api/v1/instances/batch/update
GET /api/v1/instances/stats/aggregated
```

#### Performance —É–ª—É—á—à–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- **Response Time**: 3-5x –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è resource endpoints
- **Database Load**: –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 60-80% –±–ª–∞–≥–æ–¥–∞—Ä—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é
- **Docker API Calls**: –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 70-90% —á–µ—Ä–µ–∑ batch –æ–ø–µ—Ä–∞—Ü–∏–∏
- **Memory Efficiency**: TTL-based –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

---

## [2.0.19] - 2025-01-05 üêõ FIX WHATSAPP AGNO MESSAGE DUPLICATION & TYPESCRIPT ERRORS

### üêõ Fixed - WhatsApp Agno Message Duplication Issues & TypeScript Errors

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Agno –≤ WhatsApp
- **FIXED**: –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Agno –∞–≥–µ–Ω—Ç–æ–≤ –≤ WhatsApp
- **SIMPLIFIED**: –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –æ–±—Ä–∞–∑—Ü—É Telegram –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **IMPROVED**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å `sendMessageWithSource` –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–º `undefined`
- **REMOVED**: –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ—Ç–æ–¥ `sendMessageWithSource` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏
- **TYPESCRIPT**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ TypeScript –æ—à–∏–±–∫–∏ —Å —Ç–∏–ø–∞–º–∏ `any`

#### –ü—Ä–æ–±–ª–µ–º–∞
–í –ª–æ–≥–∞—Ö –Ω–∞–±–ª—é–¥–∞–ª–∏—Å—å –æ—à–∏–±–∫–∏:
```
Error in sendMessageWithSource: No result returned from WhatsApp Web.js sendMessage
Failed to send Agno response - invalid sentMessage
sendMessageWithSource result inspection { source: 'agno', tempId: 'temp_agno_1751715443824_8xeu9o6wi', resultType: 'undefined', hasResult: false }
```

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ–ø—ã—Ç–∫–∞–º –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ fallback –º–µ—Ö–∞–Ω–∏–∑–º, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π.

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **src/whatsapp-client.ts**:
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ Agno –æ—Ç–≤–µ—Ç–æ–≤ - —É–±—Ä–∞–Ω —Å–ª–æ–∂–Ω—ã–π `sendMessageWithSource`
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ `client.sendMessage()` –∫–∞–∫ –≤ Telegram –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ
  - –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ—Ç–æ–¥ `sendMessageWithSource` –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ `addAgnoMessageId`

- **src/whatsapp-service.ts**:
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ API —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–µ—Ç–æ–¥–∞—Ö `sendMessage` –∏ `sendGroupMessage`
  - –£–±—Ä–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sendMessageWithSource` –≤ –ø–æ–ª—å–∑—É –ø—Ä—è–º–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ API —Å–æ–æ–±—â–µ–Ω–∏–π
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ TypeScript –æ—à–∏–±–∫–∏ —Å —Ç–∏–ø–∞–º–∏ `any`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ WhatsApp API —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

- **src/types.ts**:
  - –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ExtendedClient` —Å –º–µ—Ç–æ–¥–∞–º–∏ `addAgnoMessageId` –∏ `addApiMessageId`

#### –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –î–≤–æ–π–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç Agno –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –û—à–∏–±–∫–∏ `sendMessageWithSource` —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–æ**: –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π
- ‚úÖ **–û—á–∏—â–µ–Ω–æ**: –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- ‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ TypeScript –æ—à–∏–±–∫–∏ —Å —Ç–∏–ø–∞–º–∏ `any`
- ‚úÖ **–ö–æ–¥**: –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Agno —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- API –º–µ—Ç–æ–¥—ã `sendMessage` –∏ `sendGroupMessage` —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –õ–æ–≥–∏ –±–æ–ª—å—à–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫ `sendMessageWithSource`

---

## [2.0.18] - 2025-01-05 üêõ FIX INSTANCE STATUS MONITORING

### üêõ Fixed - Instance Status Monitoring Issues

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —Å—Ç–∞—Ç—É—Å–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- **FIXED**: –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ Telegram –∏ WhatsApp
- **FIXED**: –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ECONNREFUSED –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Å—Ç–∞—Ç—É—Å—É 'failed'
- **IMPROVED**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ API

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **src/instance-manager/utils/connection.utils.ts**:
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `isPortAccessible()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤
  - –£–ª—É—á—à–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –î–æ–±–∞–≤–ª–µ–Ω import –¥–ª—è –º–æ–¥—É–ª—è 'net'

- **src/instance-manager/services/instance-monitor.service.ts**:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (ECONNREFUSED, timeout, ENOTFOUND)
  - –≠–∫–∑–µ–º–ø–ª—è—Ä—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å 'pending' –≤–º–µ—Å—Ç–æ 'failed'
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ –Ω–µ–¥–∞–≤–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ (–º–µ–Ω–µ–µ 2 –º–∏–Ω—É—Ç)

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞**: –ü–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º –∫ API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞
2. **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
3. **–û—Ç—Å—Ä–æ—á–∫–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤**: 2-–º–∏–Ω—É—Ç–Ω–∞—è –æ—Ç—Å—Ä–æ—á–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
4. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã**: 'pending' –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, 'failed' —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚ùå **–ë—ã–ª–æ**: –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–æ–ª—É—á–∞–ª–∏ —Å—Ç–∞—Ç—É—Å 'failed' –∏–∑-–∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ **–°—Ç–∞–ª–æ**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'pending'

- ‚ùå **–ë—ã–ª–æ**: –ù–µ–¥–∞–≤–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Å—Ä–∞–∑—É –ø–æ–º–µ—á–∞–ª–∏—Å—å –∫–∞–∫ 'failed'
- ‚úÖ **–°—Ç–∞–ª–æ**: –ù–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–æ–ª—É—á–∞—é—Ç 2 –º–∏–Ω—É—Ç—ã –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

- ‚ùå **–ë—ã–ª–æ**: ECONNREFUSED –æ—à–∏–±–∫–∏ –ø—Ä–∏–≤–æ–¥–∏–ª–∏ –∫ —Å—Ç–∞—Ç—É—Å—É 'failed'
- ‚úÖ **–°—Ç–∞–ª–æ**: ECONNREFUSED –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ Telegram –∏ WhatsApp
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –£–±–µ–¥–∏–ª–∏—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å—Ç–∞—Ç—É—Å–æ–≤ 'pending' –∏ 'client_ready'

---

## [2.0.17] - 2025-01-30 üêõ FIX USER_ID TRANSMISSION & AGNO_CONFIG CREATION

### üêõ Fixed - User ID –∏ Agno Config Issues

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Agno –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- **FIXED**: `user_id` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Agno API –∫–∞–∫ `userId`
- **FIXED**: `agno_config` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ Telegram/WhatsApp
- **IMPROVED**: –õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Agno –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `user_id` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `message_instances`

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **src/services/agno-integration.service.ts**:
  - –û–±–Ω–æ–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `user_id` –≤–º–µ—Å—Ç–µ —Å `agno_config`
  - `userId` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–æ–ª—è `user_id` —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –∞ –Ω–µ –∏–∑ JSON
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `user_id` –≤ FormData –∫–∞–∫ `user_id` –ø–∞—Ä–∞–º–µ—Ç—Ä

- **src/instance-manager/api/v1/instances.ts**:
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—è `agno_config` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `agno_config` JSON

- **src/instance-manager/services/database.service.ts**:
  - –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `createInstance` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `agno_config` JSONB –ø–æ–ª—è
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞**: `agno_config` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ JSONB –ø–æ–ª–µ
2. **–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: `user_id` –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã, –Ω–µ –∏–∑ JSON
3. **–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Agno**: `user_id` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä `user_id`

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚ùå **–ë—ã–ª–æ**: `agno_config` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- ‚úÖ **–°—Ç–∞–ª–æ**: `agno_config` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ JSONB –ø–æ–ª–µ

- ‚ùå **–ë—ã–ª–æ**: `userId: undefined` –≤ Agno –∑–∞–ø—Ä–æ—Å–∞—Ö  
- ‚úÖ **–°—Ç–∞–ª–æ**: `userId` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `user_id` –ø–æ–ª—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å `agno_config`
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ `user_id` –≤ Agno API
- –£–±–µ–¥–∏–ª–∏—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ JSONB –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## [2.0.16] - 2025-01-30 üîÑ AGNO CONFIG REFACTORING - SINGLE SOURCE OF TRUTH

### üîÑ BREAKING CHANGES - Agno Configuration Refactoring

#### –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Agno - —Ç–æ–ª—å–∫–æ agno_config –ø–æ–ª–µ
- **REMOVED**: –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è Agno: `agent_id`, `agno_enable`, `stream`, `model`, `agno_url`
- **UNIFIED**: –í—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Agno —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–µ `agno_config JSONB`
- **REQUIRED**: –í `agno_config` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –ø–æ–ª—è `agnoUrl` –∏ `agent_id`
- **FORMAT**: URL –≤ `agnoUrl` —É–∂–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `agent_id`, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥

#### –ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```json
{
  "model": "gpt-4.1",
  "stream": false,
  "agnoUrl": "https://crafty-v0-0-1.onrender.com/v1/agents/finance_analyst_v1/runs",
  "enabled": true,
  "agent_id": "finance_analyst_v1"
}
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **UPDATED**: `src/services/agno-integration.service.ts` - —É–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `agentId` –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π, URL –±–µ—Ä–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `agno_config`
- **UPDATED**: `src/whatsapp-client.ts` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `agent_id` –≤–º–µ—Å—Ç–æ `agentId`
- **UPDATED**: `src/providers/telegram-provider.ts` - –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **UPDATED**: `src/services/provider-database.service.ts` - —É–¥–∞–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è
- **UPDATED**: `src/instance-manager/` - –æ—á–∏—Å—Ç–∫–∞ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–µ–π –≤ –º–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å–∞—Ö
- **ADDED**: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π `agnoUrl` –∏ `agent_id` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **MIGRATION**: `db/migrations/versions/009_remove_old_agno_fields.sql`
- **SCRIPT**: `scripts/apply-migration-009.sh` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ Agno
- **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–µ–Ω—å—à–µ –ø–æ–ª–µ–π –≤ –ë–î, –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ò—Å–∫–ª—é—á–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—è–º–∏

### üîß Breaking Changes
- **Database Schema**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 009
- **API Changes**: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Agno
- **Configuration**: –í—Å–µ —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è Agno –±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

### üìã Migration Steps
1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `agno_config`
2. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é**: `./scripts/apply-migration-009.sh`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Agno –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## [2.0.15] - 2025-01-30 üîÑ AGNO JSON CONFIGURATION

### üîÑ Changed - Agno Configuration Consolidation to JSON

#### –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **ADDED**: –ü–æ–ª–µ `agno_config JSONB` –¥–ª—è –ø–æ–ª–Ω–æ–π –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ Agno –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **SIMPLIFIED**: –í—Å–µ Agno –∫–æ–Ω—Ñ–∏–≥–∏ —Ç–µ–ø–µ—Ä—å –≤ –æ–¥–Ω–æ–º JSON –ø–æ–ª–µ
- **FLEXIBLE**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **src/services/agno-integration.service.ts**: 
  - –û–±–Ω–æ–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `agno_config` JSON –ø–æ–ª–µ–º
  - –ü–∞—Ä—Å–∏–Ω–≥ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  - –û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è raw JSON
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `agno_config->>'enabled' = 'true'`

#### –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **db/migrations/versions/008_add_agno_config_json_field.sql**: 
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `agno_config JSONB` –≤ —Ç–∞–±–ª–∏—Ü—É `message_instances`
  - –°–æ–∑–¥–∞–Ω GIN –∏–Ω–¥–µ–∫—Å –Ω–∞ `agno_config->'enabled'` –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–∞ JSON

- **scripts/apply-migration-008.sh**: –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ 008

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```json
{
  "enabled": true,
  "agentId": "agno_assist",
  "stream": false,
  "model": "gpt-4.1",
  "agnoUrl": "https://crafty-v0-0-1.onrender.com/v1/agents/agno_assist/runs",
  "userId": "user123"
}
```

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. **JSON –ü–∞—Ä—Å–∏–Ω–≥**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ JSONB –ø–æ–ª—è
2. **Fallback –∑–Ω–∞—á–µ–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
3. **–ì–∏–±–∫–æ—Å—Ç—å**: –õ—é–±—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ JSON
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ enabled —Å—Ç–∞—Ç—É—Å—É

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: JSONB –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ JSON –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã PostgreSQL
- **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞

### üîß Breaking Changes
- **Database Schema**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 008
- **Configuration**: –ü–µ—Ä–µ—Ö–æ–¥ —Å –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –Ω–∞ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- **Manual Migration**: –î–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –≤ JSON —Ñ–æ—Ä–º–∞—Ç

### üìã Migration Steps
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `./scripts/apply-migration-008.sh`
2. –í—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç
3. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è: `agent_id, agno_enable, stream, model, agno_url`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üìù –ü—Ä–∏–º–µ—Ä —Ä—É—á–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
```sql
-- –ü—Ä–∏–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∏–Ω—Å—Ç–∞–Ω—Å–∞
UPDATE message_instances 
SET agno_config = '{
  "enabled": true,
  "agentId": "agno_assist", 
  "stream": false,
  "model": "gpt-4.1",
  "agnoUrl": "https://crafty-v0-0-1.onrender.com/v1/agents/agno_assist/runs",
  "userId": "user123"
}'::jsonb
WHERE id = 'your-instance-id';
```

---

## [2.0.14] - 2025-01-30 üîÑ AGNO CUSTOM URL SUPPORT

### üÜï Added - Custom Agno URL Configuration

#### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **ADDED**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ Agno
- **ENHANCED**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ Agno endpoints –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **FLEXIBLE**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π URL –µ—Å–ª–∏ agno_url –Ω–µ –∑–∞–¥–∞–Ω

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **src/services/agno-integration.service.ts**: 
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `agnoUrl` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoConfig`
  - –û–±–Ω–æ–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `agno_url` –∏–∑ –ë–î
  - –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è URL: `config.agnoUrl || —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π_URL`
  - –û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± agno_url

#### –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **db/migrations/versions/007_add_agno_url_to_message_instances.sql**: 
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `agno_url TEXT` –≤ —Ç–∞–±–ª–∏—Ü—É `message_instances`
  - –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ–ª—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º URL

- **scripts/apply-migration-007.sh**: –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ 007

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç URL**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `message_instances.agno_url` –µ—Å–ª–∏ –∑–∞–¥–∞–Ω
2. **Fallback**: –ï—Å–ª–∏ agno_url –ø—É—Å—Ç–æ–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `${AGNO_API_BASE_URL}/v1/agents/${agent_id}/runs`
3. **–ì–∏–±–∫–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Agno endpoint

#### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ë–î
```sql
UPDATE message_instances 
SET agno_url = 'https://custom-agno.example.com/v1/agents/custom_agent/runs'
WHERE id = 'instance-id';
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å**: –†–∞–∑–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ Agno —Å–µ—Ä–≤–µ—Ä—ã
- **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Agno
- **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ backup URL –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è**: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

### üîß Breaking Changes
- **Database Schema**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 007
- **Configuration**: –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ `agno_url` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### üìã Migration Steps
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `./scripts/apply-migration-007.sh`
2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç—å agno_url –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## [2.0.13] - 2025-01-30 üîÑ AGNO API MULTIPART ENDPOINT & MODEL SUPPORT

### üîÑ Changed - Agno Integration API Multipart Endpoint with Model Support

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Agno
- **UPDATED**: –ò–∑–º–µ–Ω–µ–Ω endpoint –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Agno
- **OLD**: `/v1/playground/agents/{agentId}/runs`
- **NEW**: `/v1/agents/{agentId}/runs/multipart`
- **ADDED**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `model` –¥–ª—è –≤—ã–±–æ—Ä–∞ AI –º–æ–¥–µ–ª–∏
- **REMOVED**: –£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor` –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **src/services/agno-integration.service.ts**: 
  - –ò–∑–º–µ–Ω–µ–Ω URL endpoint –≤ –º–µ—Ç–æ–¥–µ `sendToAgentWithFiles()`
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `model` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `AgnoConfig` –∏ `AgnoApiRequest`
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `model` –≤ FormData –∑–∞–ø—Ä–æ—Å—ã
  - –£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor: 'false'`
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ª–æ–≥–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `'gpt-4.1'` –¥–ª—è –º–æ–¥–µ–ª–∏

#### –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **db/migrations/versions/006_add_model_to_message_instances.sql**: 
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `model VARCHAR(100) DEFAULT 'gpt-4.1'` –≤ —Ç–∞–±–ª–∏—Ü—É `message_instances`
  - –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ–ª—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

- **scripts/apply-migration-006.sh**: –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ 006

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π SQL –∑–∞–ø—Ä–æ—Å –≤ getAgnoConfig()
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `model` –≤ SELECT –∑–∞–ø—Ä–æ—Å
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `'gpt-4.1'`
- –û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏

#### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
```bash
curl -X POST "URL/v1/agents/{agent_id}/runs/multipart" \
  -F "message=–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç" \
  -F "stream=false" \
  -F "model=gpt-4.1" \
  -F "user_id=test_user_123" \
  -F "session_id=test_session_multipart" \
  -F "files=@test_document.txt"
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–ì–∏–±–∫–æ—Å—Ç—å**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–Ω—ã—Ö AI –º–æ–¥–µ–ª–µ–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ multipart endpoint
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π –≤ –±—É–¥—É—â–µ–º
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å –Ω–æ–≤—ã–º API

### üîß Breaking Changes
- **API Endpoint**: –ò–∑–º–µ–Ω–µ–Ω URL –¥–ª—è Agno –∑–∞–ø—Ä–æ—Å–æ–≤
- **Database Schema**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 006
- **Configuration**: –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `model` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∞–≥–µ–Ω—Ç–æ–≤

### üìã Migration Steps
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `./scripts/apply-migration-006.sh`
2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å –ø–æ–ª–µ–º `model`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## [2.0.12] - 2025-01-30 üîÑ AGNO API ENDPOINT UPDATE

### üîÑ Changed - Agno Integration API Endpoint

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Agno
- **UPDATED**: –ò–∑–º–µ–Ω–µ–Ω endpoint –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Agno
- **OLD**: `/v1/playground/agents/{agentId}/runs`
- **NEW**: `/v1/agents/agno_assist/runs/multipart`
- **ADDED**: –ü–∞—Ä–∞–º–µ—Ç—Ä `model=gpt-4.1` –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **src/services/agno-integration.service.ts**: 
  - –ò–∑–º–µ–Ω–µ–Ω URL endpoint –≤ –º–µ—Ç–æ–¥–µ `sendToAgentWithFiles()`
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `model: 'gpt-4.1'` –≤ FormData
  - –£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor: 'false'`
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ª–æ–≥–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `agentId: 'agno_assist'`

#### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
```bash
curl -X POST "http://localhost:8000/v1/agents/agno_assist/runs/multipart" \
  -F "message=–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç" \
  -F "stream=false" \
  -F "model=gpt-4.1" \
  -F "user_id=test_user_123" \
  -F "session_id=test_session_multipart" \
  -F "files=@test_document.txt"
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ `agno_assist`
- **–ú–æ–¥–µ–ª—å**: –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ `gpt-4.1` –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω –Ω–µ–Ω—É–∂–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor`

---

## [2.0.11] - 2025-01-30 üîÑ DATABASE SCHEMA MIGRATION

### üîÑ Changed - Database Schema Migration from `ai` to `public`

#### –ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **MIGRATION**: –ü–µ—Ä–µ—Ö–æ–¥ —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π —Å—Ö–µ–º—ã `ai` –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å—Ö–µ–º—É `public`
- **COMPATIBILITY**: –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PostgreSQL –∏ Supabase
- **SIMPLIFICATION**: –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **src/config/database.config.ts**: –°—Ö–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∞ —Å `ai` –Ω–∞ `public`
- **src/instance-manager/config/database.config.ts**: –°—Ö–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∞ —Å `ai` –Ω–∞ `public`
- **src/services/message-storage.service.ts**: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ö–µ–º—ã `public`
- **src/instance-manager/services/database.service.ts**: –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Å—Ö–µ–º—ã `public`
- **src/services/agno-integration.service.ts**: SQL –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Å—Ö–µ–º—ã `public`
- **src/services/provider-database.service.ts**: –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Å—Ö–µ–º—ã `public`
- **src/utils/test-db-connection.ts**: SQL –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Å—Ö–µ–º—ã `public`

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- **db/migrations/versions/002_remove_current_api_key.sql**: `ai.` ‚Üí `public.`
- **db/migrations/versions/004_add_session_id_to_messages.sql**: `ai.` ‚Üí `public.`
- **db/migrations/versions/005_add_message_source.sql**: `ai.` ‚Üí `public.`

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **env.development**: `DATABASE_SCHEMA=public`
- **env.production**: `DATABASE_SCHEMA=public`
- **docker-compose.yml**: `DATABASE_SCHEMA=${DATABASE_SCHEMA:-public}`
- **docker-compose.production.yml**: `DATABASE_SCHEMA=${DATABASE_SCHEMA:-public}`
- **docker-compose.instance-manager.yml**: `DATABASE_SCHEMA=${DATABASE_SCHEMA:-public}`
- **docker-compose.instance-manager.production.yml**: `DATABASE_SCHEMA=${DATABASE_SCHEMA:-public}`
- **docker-compose.supabase.yml**: `DATABASE_SCHEMA: public`

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **FINAL_README.md**: –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- **docs/MULTI_PROVIDER_API.md**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- **AWS_DEPLOYMENT.md**: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- **install.sh**: –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω

#### –£—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã
- **src/instance-manager/utils/docker-compose.utils.ts**: –°—Ö–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ `public`
- **src/instance-manager/utils/port-manager.utils.ts**: –°—Ö–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ `public`
- **deploy-production.sh**: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –æ–±–Ω–æ–≤–ª–µ–Ω–æ

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Å—Ö–µ–º—ã PostgreSQL
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ**: –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –õ—É—á—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –ë–î
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ PostgreSQL

### üîß Breaking Changes
- **DATABASE_SCHEMA**: –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–æ —Å `ai` –Ω–∞ `public`
- **SQL Queries**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å—Ö–µ–º–æ–π `public`
- **Migrations**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

### üìã Migration Steps
1. –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `DATABASE_SCHEMA=public`
2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ `public` –∏–ª–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

---

## [2.0.10] - 2025-01-29 üîß MESSAGE_SOURCE CLASSIFICATION FINAL FIX

### üîß Critical Bug Fix - WhatsApp Message Source Detection

#### –ü—Ä–æ–±–ª–µ–º–∞
- **ISSUE**: –í—Å–µ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—É—á–∞–ª–∏ `message_source: 'device'`, –≤–∫–ª—é—á–∞—è:
  - ‚úÖ –û—Ç–≤–µ—Ç—ã Agno (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `'agno'`)
  - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ API (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `'api'`)
  - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `'device'`)

#### –ü—Ä–∏—á–∏–Ω–∞
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `message_create` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –¥–ª—è **–≤—Å–µ—Ö** –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`fromMe: true`)
- –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ `message_source` –∑–Ω–∞—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ

#### –†–µ—à–µ–Ω–∏–µ
- **ADDED**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ `apiMessageIds` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è API —Å–æ–æ–±—â–µ–Ω–∏–π
- **ENHANCED**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `message_create` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç:
  - –°–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–∞–∫ –æ—Ç–≤–µ—Ç—ã Agno
  - –°–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API endpoints
- **FIXED**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **src/whatsapp-client.ts**: –î–æ–±–∞–≤–ª–µ–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ `apiMessageIds` –∏ –º–µ—Ç–æ–¥ `addApiMessageId()`
- **src/whatsapp-service.ts**: –í—ã–∑–æ–≤ `addApiMessageId()` –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è API —Å–æ–æ–±—â–µ–Ω–∏–π
- **LOGIC**: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

#### –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
**WhatsApp & Telegram Message Sources:**
- ‚úÖ `'user'` - –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `'agno'` - –æ—Ç–≤–µ—Ç—ã –æ—Ç AI –∞–≥–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ Agno –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é  
- ‚úÖ `'device'` - —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ WhatsApp)
- ‚úÖ `'api'` - —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API endpoints

---

## [2.0.9] - 2025-01-29 üöÄ AGNO MEDIA FILES INTEGRATION

### üéØ Major Feature - Media Files Support in Agno Integration

#### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **ADDED**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ –≤ Agno AI –∞–≥–µ–Ω—Ç—ã
- **ENHANCED**: WhatsApp –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Agno
- **ENHANCED**: Telegram –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã (—Ñ–æ—Ç–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≤–∏–¥–µ–æ) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ Agno –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **IMPROVED**: AI –∞–≥–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤
**WhatsApp:**
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG, PNG, WebP)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã (PDF, DOC, TXT, –∏ –¥—Ä.)
- ‚úÖ –í–∏–¥–µ–æ (MP4, AVI, –∏ –¥—Ä.)
- ‚úÖ –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã
- ‚úÖ –°—Ç–∏–∫–µ—Ä—ã

**Telegram:**
- ‚úÖ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (JPEG, PNG)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã (–≤—Å–µ —Ç–∏–ø—ã)
- ‚úÖ –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã
- ‚úÖ –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **src/services/agno-integration.service.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoMediaFile` –¥–ª—è –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `sendToAgentWithFiles()` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–æ–≤
  - –†–∞—Å—à–∏—Ä–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoApiRequest` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `files`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ multipart/form-data —Å —Ñ–∞–π–ª–∞–º–∏

- **src/whatsapp-client.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `AgnoMediaFile`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞ –∏–∑ WhatsApp —Å–æ–æ–±—â–µ–Ω–∏–π
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è base64 –º–µ–¥–∏–∞ –≤ Buffer –¥–ª—è Agno
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

- **src/providers/telegram-provider.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `AgnoMediaFile`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π, –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–∏–¥–µ–æ
  - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Telegram Bot API
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ TypeScript –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
# –ü—Ä–∏–º–µ—Ä curl –∑–∞–ø—Ä–æ—Å–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
curl -X 'POST' \
  'https://agno-api.com/v1/playground/agents/671088/runs' \
  -H 'Content-Type: multipart/form-data' \
  -F 'message=—á—Ç–æ –≤ —Ñ–∞–π–ª–µ' \
  -F 'stream=false' \
  -F 'monitor=false' \
  -F 'session_id=session123' \
  -F 'user_id=user123' \
  -F 'files=@image.png;type=image/png'
```

#### –£–ª—É—á—à–µ–Ω–∏—è UX
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**: `[PHOTO: filename.jpg]`, `[DOCUMENT: file.pdf]`
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –¢–µ–∫—Å—Ç + —Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤–º–µ—Å—Ç–µ
- **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ü—É—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ñ–∞–π–ª–∞–º–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

---

## [2.0.8] - 2025-01-29 üîß WHATSAPP MESSAGE_SOURCE CLASSIFICATION FIX

### üîß Bug Fixes - WhatsApp Message Source Detection

#### –ü—Ä–æ–±–ª–µ–º–∞
- **ISSUE**: –í—Å–µ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ WhatsApp (`is_from_me: true`) –ø–æ–ª—É—á–∞–ª–∏ `message_source: 'device'`
- **CAUSE**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `message_create` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **IMPACT**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ —Ä–∞–∑–ª–∏—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã Agno –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ API

#### –†–µ—à–µ–Ω–∏–µ
- **FIXED**: `src/whatsapp-client.ts` - –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∫–∞–∫ –æ—Ç–≤–µ—Ç—ã Agno
- **ADDED**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ `agnoMessageIds` –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- **ENHANCED**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `message_create` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–∞–∫ –æ—Ç–≤–µ—Ç—ã Agno

#### –¢–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
**WhatsApp Message Sources:**
- `'user'` - ‚úÖ –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`is_from_me: false`)
- `'agno'` - ‚úÖ –û—Ç–≤–µ—Ç—ã –æ—Ç AI –∞–≥–µ–Ω—Ç–∞ (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞)
- `'device'` - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—á–µ—Ä–µ–∑ WhatsApp Web)
- `'api'` - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API endpoint

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. **–û—Ç–≤–µ—Ç—ã Agno**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å `message_source: 'agno'` –∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
2. **–°–æ–æ–±—â–µ–Ω–∏—è —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `message_create` —Å `message_source: 'device'`
3. **API —Å–æ–æ–±—â–µ–Ω–∏—è**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `whatsapp-service.ts` —Å `message_source: 'api'`
4. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: `message_create` –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã Agno

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞–∑–ª–∏—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ WhatsApp
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º —Å–æ–æ–±—â–µ–Ω–∏–π

---

## [2.0.7] - 2025-01-29 üîß SESSION_ID CONSISTENCY FIX

### üîß Bug Fixes - Session ID Generation

#### –ü—Ä–æ–±–ª–µ–º–∞
- **ISSUE**: `session_id` –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º —á–∞—Ç–µ
- **CAUSE**: –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é, –∞ –æ—Ç–≤–µ—Ç—ã –∞–≥–µ–Ω—Ç–∞ –±—Ä–∞–ª–∏ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–∞ Agno
- **IMPACT**: –°–æ–æ–±—â–µ–Ω–∏—è –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏ –ø–æ–ª—É—á–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ `session_id`, —á—Ç–æ –Ω–∞—Ä—É—à–∞–ª–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É

#### –†–µ—à–µ–Ω–∏–µ
- **FIXED**: `src/providers/telegram-provider.ts` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `session_id` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Agno
- **FIXED**: `src/whatsapp-client.ts` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `session_id` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Agno
- **ADDED**: –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `generateSessionId()` –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö
- **REMOVED**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–∞ Agno

#### –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ Session ID
1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ Agno**: `session_id` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏–∑ `agent_id + chat_id` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Agno
2. **–ü–µ—Ä–µ–¥–∞—á–∞ –≤ Agno**: `session_id` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫ Agno
3. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: Agno –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ç –∂–µ `session_id`, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –µ–¥–∏–Ω—Å—Ç–≤–æ —Å–µ—Å—Å–∏–∏
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ agent_id**: –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏ –∫–æ–≥–¥–∞ `agent_id` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### ‚ú® New Features - Message Source Classification

#### –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `message_source`
- **ADDED**: `db/migrations/versions/005_add_message_source.sql` - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è
- **ADDED**: `scripts/apply-migration-005.sh` - –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
- **UPDATED**: `src/types.ts` - –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø `message_source` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **UPDATED**: `src/services/message-storage.service.ts` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è
- **UPDATED**: `src/config/database.config.ts` - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã

#### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
**WhatsApp:**
- `'user'` - –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`is_from_me: false`)
- `'agno'` - –û—Ç–≤–µ—Ç—ã –æ—Ç AI –∞–≥–µ–Ω—Ç–∞ (`is_from_me: true` + `agent_id` –µ—Å—Ç—å)
- `'device'` - –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`fromMe: true` –≤ WhatsApp Web)
- `'api'` - –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API endpoint

**Telegram Bot:**
- `'user'` - –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`is_from_me: false`)
- `'agno'` - –û—Ç–≤–µ—Ç—ã –æ—Ç AI –∞–≥–µ–Ω—Ç–∞ (`is_from_me: true` + `agent_id` –µ—Å—Ç—å)
- `'api'` - –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API endpoint

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **UPDATED**: `src/whatsapp-client.ts` - –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `message_source` –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- **UPDATED**: `src/providers/telegram-provider.ts` - –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `message_source` –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- **UPDATED**: `src/utils/test-db-connection.ts` - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–†–∞–∑–ª–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**: –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π vs –∞–≥–µ–Ω—Ç–æ–≤ vs API
- **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (WhatsApp, Telegram)
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –≤–Ω–µ—à–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏

---

## [2.0.6] - 2025-01-29 üîß AGNO API PLAYGROUND INTEGRATION

### üîÑ Changed - Agno Integration Update
- **UPDATED**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Agno API –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ Playground API
  - –ò–∑–º–µ–Ω–µ–Ω URL –∑–∞–ø—Ä–æ—Å–∞ —Å `/v1/agents/{agent_id}/runs` –Ω–∞ `/v1/playground/agents/{agent_id}/runs`
  - –ò–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å `application/json` –Ω–∞ `multipart/form-data`
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor=false` –≤ –∑–∞–ø—Ä–æ—Å—ã –∫ Agno
  - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ JSON —Å –ø–æ–ª–µ–º `content`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `session_id` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `run_id` –∏ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno

### üÜï Added - New Agno Features
- **src/services/agno-integration.service.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `FormData` –¥–ª—è multipart –∑–∞–ø—Ä–æ—Å–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `sessionId` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoConfig`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `content`, `run_id`, `agent_id`, `session_id`, `metrics` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoResponse`
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoApiRequest`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è `session_id` –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ —Å –ø–æ–ª–µ–º `content`

- **src/whatsapp-client.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è `content` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno
  - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `session_id` –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `run_id` –∏ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno

- **src/providers/telegram-provider.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è `content` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno
  - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `session_id` –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `run_id` –∏ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno

### üì¶ Dependencies
- **ADDED**: –ü–∞–∫–µ—Ç `form-data` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ multipart/form-data –∑–∞–ø—Ä–æ—Å–æ–≤
- **ADDED**: –ü–∞–∫–µ—Ç `@types/form-data` –¥–ª—è TypeScript —Ç–∏–ø–æ–≤

### üîß Technical Details
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Agno —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π Playground API
- –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ multipart/form-data —Å –ø–æ–ª—è–º–∏:
  - `message` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
  - `stream` - —Ä–µ–∂–∏–º –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (boolean)
  - `monitor` - —Ä–µ–∂–∏–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–≤—Å–µ–≥–¥–∞ false)
  - `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
  - `session_id` - ID —Å–µ—Å—Å–∏–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `content` —Å —Ç–µ–∫—Å—Ç–æ–º –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø–æ–ª–µ–º `message` –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç `run_id`, `session_id` –∏ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚úÖ Backwards Compatibility
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–ª—è `message` –≤ –æ—Ç–≤–µ—Ç–∞—Ö –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `session_id` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

---

## [2.0.5] - 2025-06-20 üîß SESSION_ID & AGENT_ID FIXES

### üÜï New Features - Session Management

#### Session ID Implementation
- **NEW**: `db/migrations/versions/004_add_session_id_to_messages.sql` - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ session_id –≤ —Ç–∞–±–ª–∏—Ü—É messages
- **NEW**: `scripts/apply-migration-004.sh` - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ session_id
- **NEW**: –§—É–Ω–∫—Ü–∏—è `generate_session_id()` –≤ PostgreSQL –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ UUID –∏–∑ agent_id + chat_id

#### Message Storage Enhancement
- **ENHANCED**: `src/services/message-storage.service.ts` - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ session_id –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MessageData
- **ENHANCED**: `src/services/message-storage.service.ts` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è session_id –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **ENHANCED**: `src/config/database.config.ts` - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã messages —Å –ø–æ–ª–µ–º session_id
- **ENHANCED**: `src/utils/test-db-connection.ts` - –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–ª—è session_id

### üîß Bug Fixes - Agent ID Storage

#### Telegram Provider Fixes
- **FIXED**: `src/providers/telegram-provider.ts` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ agent_id –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **FIXED**: `src/providers/base-provider.ts` - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ getAgentId() –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è agent_id
- **FIXED**: `src/providers/telegram-provider.ts` - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –º–µ—Ç–æ–¥ getAgentId() –¥–ª—è Telegram –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

#### WhatsApp Provider Fixes  
- **FIXED**: `src/whatsapp-client.ts` - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ agent_id –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **FIXED**: `src/whatsapp-client.ts` - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ agent_id –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **FIXED**: `src/whatsapp-client.ts` - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ agent_id –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞

### üìä Database Changes

#### New Fields
- `session_id` (UUID) - –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ—Å—Å–∏–∏ –∏–∑ agent_id + chat_id
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –ø–æ session_id

#### Session Logic
- –í—Ö–æ–¥—è—â–∏–µ –∏ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —á–∞—Ç–∞ —Å –æ–¥–Ω–∏–º –∞–≥–µ–Ω—Ç–æ–º –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π session_id
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è session_id –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

### üöÄ Impact

#### For Telegram Instances
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ agent_id –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è session_id –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—è from_number (chat_id) –∏ to_number (bot name)

#### For WhatsApp Instances  
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ agent_id –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è session_id –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

#### Database Structure
- ‚úÖ –ù–æ–≤–æ–µ –ø–æ–ª–µ session_id –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Å–µ—Å—Å–∏—è–º
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è session_id

---

## [2.0.4] - 2025-06-20 üîß TELEGRAM MESSAGE STORAGE FIXES

### üîß Bug Fixes - Telegram Message Storage

#### Message Storage Enhancement
- **ENHANCED**: `src/services/message-storage.service.ts` - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `agent_id` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MessageData
- **ENHANCED**: `src/services/message-storage.service.ts` - –û–±–Ω–æ–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–ª–µ–º agent_id
- **ENHANCED**: `src/config/database.config.ts` - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã messages —Å –ø–æ–ª–µ–º agent_id (TEXT)
- **ENHANCED**: `src/utils/test-db-connection.ts` - –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–ª—è agent_id

#### Telegram Provider Message Format
- **FIXED**: `src/providers/telegram-provider.ts` - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –º–µ—Ç–æ–¥ storeMessage –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–ª–µ–≥—Ä–∞–º —Å–æ–æ–±—â–µ–Ω–∏–π
- **FIXED**: –î–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤ –ø–æ–ª–µ `from_number` —Ç–µ–ø–µ—Ä—å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è chat_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –∏–º–µ–Ω–∏
- **FIXED**: –î–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤ –ø–æ–ª—è `from_number` –∏ `to_number` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∏–º—è –±–æ—Ç–∞ –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **ADDED**: –ú–µ—Ç–æ–¥ `getBotName()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ –±–æ—Ç–∞ –∏–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ
- **ADDED**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `agent_id` –ø—Ä–∏ –ø–µ—Ä–µ—Å—ã–ª–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∞–≥–µ–Ω—Ç—É —á–µ—Ä–µ–∑ Agno –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

#### Message Field Logic for Telegram
- **–í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è**:
  - `from_number`: chat_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "134527512")
  - `to_number`: –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "MyBot (@mybot)")
- **–ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è**:
  - `from_number`: –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "MyBot (@mybot)")
  - `to_number`: chat_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "134527512")
- **–û—Ç–≤–µ—Ç—ã –∞–≥–µ–Ω—Ç–∞**:
  - `agent_id`: ID –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä–æ–º—É –±—ã–ª–æ –ø–µ—Ä–µ—Å–ª–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ

### ‚úÖ Database Schema Updates
- **UPDATED**: –ü–æ–ª–µ `agent_id` —Ç–∏–ø–∞ TEXT –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É ai.messages
- **UPDATED**: –°–æ–∑–¥–∞–Ω –∏–Ω–¥–µ–∫—Å `idx_messages_agent_id` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ agent_id
- **UPDATED**: SQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –æ–±–Ω–æ–≤–ª–µ–Ω –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

---

## [2.0.3] - 2025-06-18 üîß MCP INSTANCE FIXES

### üîß Bug Fixes - MCP Instance Issues

#### Database Connection Fix
- **FIXED**: `src/instance-manager/utils/docker-compose.utils.ts` - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è MCP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **FIXED**: MCP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ DATABASE_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
- **FIXED**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `ECONNREFUSED 127.0.0.1:5432` –≤ MCP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **ADDED**: –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è MCP —Å–µ—Ä–≤–∏—Å–æ–≤:
  - `DATABASE_URL`, `DATABASE_HOST`, `DATABASE_PORT`
  - `DATABASE_NAME`, `DATABASE_USER`, `DATABASE_PASSWORD`
  - `DATABASE_SCHEMA`, `DATABASE_SSL`, `USE_SUPABASE`

#### Memory Management Fix
- **ADDED**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è MCP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ Docker Compose
- **FIXED**: –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (88%+) –≤ MCP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **CONFIGURED**: Memory limits: 512MB max, 128MB reserved
- **CONFIGURED**: CPU limits: 0.5 cores max, 0.1 cores reserved

#### Environment Variables Enhancement
- **ADDED**: `INSTANCE_ID` –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è MCP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **ADDED**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Agno –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ MCP —Å–µ—Ä–≤–∏—Å–∞—Ö
- **ADDED**: –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ DB –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ Testing Results
- **TESTED**: MCP instance creation - ‚úÖ Working
- **TESTED**: Combined API+MCP instances - ‚úÖ Working  
- **TESTED**: SSE transport connectivity - ‚úÖ Working
- **TESTED**: Docker container deployment - ‚úÖ Working
- **IDENTIFIED**: Database connection issues - üîß Fixed
- **IDENTIFIED**: Memory pressure issues - üîß Fixed

---

## [2.0.2] - 2025-01-29 üöÄ GITHUB DEPLOYMENT

### üöÄ Deployment & Version Control
- **DEPLOYED**: –í–µ—Å—å –∫–æ–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **COMMIT**: `ee80c30` - Multi-provider messaging system with database integration
- **REPOSITORY**: https://github.com/Bakhitov/craftify-messangers.git
- **BRANCH**: main
- **FILES**: 40 —Ñ–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ, 14,146 –≤—Å—Ç–∞–≤–æ–∫, 3,171 —É–¥–∞–ª–µ–Ω–∏–π
- **STATUS**: –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### üìä GitHub Statistics
- **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã**: 13 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**: 27 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ —É–ª—É—á—à–µ–Ω–æ
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –ì–æ—Ç–æ–≤—ã–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ë–î
- **Docker**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Ä–µ–¥ (dev/prod)

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- **WhatsApp API**: ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Multi-Provider**: ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞
- **Database**: ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã
- **Docker**: ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- **API Documentation**: ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **Testing Guide**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

---

## [2.0.1] - 2025-01-29 üìã TESTING GUIDE UPDATE

### üìã TESTING_GUIDE_NEW.md - –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

#### ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **NEW**: –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è Multi-Provider –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **NEW**: –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö 7 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (WhatsApp Web, Telegram, WhatsApp Official, Facebook Messenger, Instagram, Slack, Discord)
- **NEW**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å rollback —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- **NEW**: Multi-Provider API endpoints —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **NEW**: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Å—Ö–µ–º—ã ai –≤–º–µ—Å—Ç–æ public
- **NEW**: –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **NEW**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **NEW**: E2E —Ç–µ—Å—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

#### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **UPDATED**: –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ai –≤–º–µ—Å—Ç–æ public
- **UPDATED**: –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **UPDATED**: Instance Manager –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **UPDATED**: Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è development –∏ production
- **UPDATED**: API endpoints –¥–ª—è –º—É–ª—å—Ç–∏–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

#### üß™ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **NEW**: –¢–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **NEW**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Multi-Provider API
- **NEW**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **NEW**: –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **NEW**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## [2.0.0] - 2024-01-15 üöÄ MULTI-PROVIDER RELEASE

### üöÄ Major Features Added

#### Multi-Provider Architecture
- **NEW**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–ª—å—Ç–∏–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è 6 –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤
- **NEW**: –ï–¥–∏–Ω—ã–π API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É  
- **NEW**: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ webhook'–æ–≤

#### Supported Providers
- **NEW**: WhatsApp Official API –ø—Ä–æ–≤–∞–π–¥–µ—Ä (`src/providers/whatsapp-official-provider.ts`)
- **NEW**: Facebook Messenger –ø—Ä–æ–≤–∞–π–¥–µ—Ä (`src/providers/facebook-messenger-provider.ts`)
- **NEW**: Instagram –ø—Ä–æ–≤–∞–π–¥–µ—Ä (`src/providers/instagram-provider.ts`)
- **NEW**: Slack –ø—Ä–æ–≤–∞–π–¥–µ—Ä (`src/providers/slack-provider.ts`)
- **NEW**: Discord –ø—Ä–æ–≤–∞–π–¥–µ—Ä (`src/providers/discord-provider.ts`)
- **ENHANCED**: Telegram –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π

### üóÑÔ∏è Database Architecture

#### Provider-Specific Tables
- **NEW**: `telegram_instances` table for Telegram provider instances
- **NEW**: `whatsapp_official_instances` table for WhatsApp Official instances
- **NEW**: `facebook_messenger_instances` table for Facebook Messenger instances
- **NEW**: `instagram_instances` table for Instagram instances
- **NEW**: `slack_instances` table for Slack instances
- **NEW**: `discord_instances` table for Discord instances

#### Migration System
- **NEW**: Migration `20240115_001_split_instances_by_provider.sql` - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- **NEW**: Migration `20240115_002_rollback_split_instances.sql` - Rollback —Å–∫—Ä–∏–ø—Ç
- **NEW**: Automated migration scripts with backup functionality (`scripts/migrate-database.sh`)

#### Database Services
- **NEW**: `ProviderDatabaseService` (`src/services/provider-database.service.ts`) - –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
- **ENHANCED**: `MessageStorageService` - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- **ENHANCED**: `WebhookService` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### üîß Core Services

#### Multi-Provider Service
- **NEW**: `MultiProviderService` (`src/services/multi-provider.service.ts`) - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- **NEW**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **NEW**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **NEW**: Unified API –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### üåê API Endpoints

#### Multi-Provider API Routes (`src/routes/multi-provider.routes.ts`)
- **NEW**: `POST /api/v1/multi-provider/instances` - –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **NEW**: `GET /api/v1/multi-provider/instances` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **NEW**: `GET /api/v1/multi-provider/instances/:provider/:instanceId/status` - –°—Ç–∞—Ç—É—Å –∏–Ω—Å—Ç–∞–Ω—Å–∞
- **NEW**: `DELETE /api/v1/multi-provider/instances/:provider/:instanceId` - –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- **NEW**: `POST /api/v1/multi-provider/instances/:provider/:instanceId/send-message` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- **NEW**: `POST /api/v1/multi-provider/instances/:provider/:instanceId/send-media` - –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞
- **NEW**: `GET /api/v1/multi-provider/instances/:provider/:instanceId/contacts` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- **NEW**: `GET /api/v1/multi-provider/instances/:provider/:instanceId/chats` - –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–æ–≤
- **NEW**: `GET /api/v1/multi-provider/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **NEW**: `GET /api/v1/multi-provider/active-providers` - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

#### Webhook Endpoints
- **NEW**: `POST /api/v1/webhook/telegram/:instanceId` - Telegram webhook
- **NEW**: `POST /api/v1/webhook/whatsapp-official/:instanceId` - WhatsApp Official webhook
- **NEW**: `GET /api/v1/webhook/whatsapp-official/:instanceId` - WhatsApp Official verification
- **NEW**: `POST /api/v1/webhook/facebook-messenger/:instanceId` - Facebook Messenger webhook
- **NEW**: `POST /api/v1/webhook/instagram/:instanceId` - Instagram webhook
- **NEW**: `POST /api/v1/webhook/slack/:instanceId` - Slack webhook

### üì¶ Dependencies Added to package.json

#### New Libraries Added
- **NEW**: `wh-wrapper` ^1.3.0 - WhatsApp Official API wrapper
- **NEW**: `messaging-api-messenger` ^1.0.1 - Facebook Messenger API
- **NEW**: `@slack/bolt-js` ^3.17.1 - Slack Bot framework
- **NEW**: `@slack/web-api` ^7.0.2 - Slack Web API client
- **NEW**: `discord.js` ^14.14.1 - Discord bot library
- **NEW**: `form-data` ^4.0.0 - Form data handling for file uploads

### üîç Type System Enhanced in `src/types.ts`

#### Enhanced Types
- **ENHANCED**: `MessengerProvider` type - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **NEW**: Provider-specific config types:
  - `WhatsAppOfficialConfig`
  - `FacebookMessengerConfig`
  - `InstagramConfig`
  - `SlackConfig`
  - `DiscordConfig`
- **NEW**: Provider-specific status response types
- **ENHANCED**: `WebhookMessageData` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### üîß Provider Features

#### WhatsApp Official Provider Features
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π  
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞ —á–µ—Ä–µ–∑ Facebook Graph API

#### Facebook Messenger Provider Features
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è

#### Instagram Provider Features
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ Instagram Basic Display API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞

#### Slack Provider Features
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–æ –≤—Å–µ—Ö —Ç–∏–ø–∞—Ö –∫–∞–Ω–∞–ª–æ–≤
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–∞–Ω–∞–ª–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –±–æ—Ç–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ thread'–æ–≤
- ‚úÖ Webhook –∏ Events API

#### Discord Provider Features
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≥–∏–ª—å–¥–∏—è—Ö –∏ DM
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–∞–Ω–∞–ª–æ–≤
- ‚úÖ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (–±–µ–∑ webhook'–æ–≤)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–∞–Ω–∞–ª–æ–≤

### üìö Documentation

#### Comprehensive Documentation
- **NEW**: `docs/MULTI_PROVIDER_API.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **NEW**: `docs/MULTI_PROVIDER_PLAN.md` - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **NEW**: –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **NEW**: curl –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö API endpoints
- **NEW**: –û–ø–∏—Å–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### üõ†Ô∏è Infrastructure

#### Database Migration Tools
- **NEW**: `scripts/migrate-database.sh` - –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **NEW**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π  
- **NEW**: Rollback —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üîÑ Migration Path

#### Backward Compatibility
- **NEW**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö WhatsApp Web –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **NEW**: –ì—Ä–∞–¥—É–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è - —Å—Ç–∞—Ä—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- **NEW**: Rollback —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üìä Files Created/Modified

#### New Files Created:
- `src/providers/whatsapp-official-provider.ts`
- `src/providers/facebook-messenger-provider.ts`
- `src/providers/instagram-provider.ts`
- `src/providers/slack-provider.ts`
- `src/providers/discord-provider.ts`
- `src/services/provider-database.service.ts`
- `src/routes/multi-provider.routes.ts`
- `docs/MULTI_PROVIDER_API.md`
- `db/migrations/versions/20240115_001_split_instances_by_provider.sql`
- `db/migrations/versions/20240115_002_rollback_split_instances.sql`
- `scripts/migrate-database.sh`

#### Files Modified:
- `src/services/multi-provider.service.ts` - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `src/services/webhook.service.ts` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- `src/types.ts` - –ù–æ–≤—ã–µ —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- `package.json` - –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

---

## Migration Instructions

### From Version 1.x to 2.0.0

1. **Backup your database:**
   ```bash
   pg_dump whatsapp_mcp > backup_$(date +%Y%m%d_%H%M%S).sql
   ```

2. **Install new dependencies:**
   ```bash
   npm install
   ```

3. **Run database migration:**
   ```bash
   cd db/migrations && alembic upgrade head
   ```
   Or use migration script:
   ```bash
   ./scripts/migrate-database.sh
   ```

4. **Update environment variables:**
   - Add provider-specific tokens and configurations
   - Update API endpoints if needed

5. **Test new functionality:**
   - Verify existing WhatsApp Web instances still work
   - Test new provider integrations

### Rollback Instructions

If you need to rollback to the previous version:

```bash
cd db/migrations && alembic downgrade -1
# Or restore from backup:
psql whatsapp_mcp < your_backup_file.sql
```

---

## Breaking Changes

- **Database Schema**: Tables restructured by provider type (with migration)
- **API Routes**: New multi-provider endpoints (v1 API still supported)
- **Configuration**: Provider-specific configuration format

## Notes

- All existing WhatsApp Web functionality remains intact
- New multi-provider system runs alongside existing systems
- Full backward compatibility maintained
- Ready for production deployment

---

**üìä Release Summary:**
- **Files Changed**: 15+ files created/modified
- **Lines of Code Added**: 3000+ lines
- **New Features**: 6 new messenger provider integrations
- **API Endpoints**: 10+ new REST endpoints
- **Database Tables**: 6 new provider-specific tables
- **Documentation**: Complete API documentation with examples

---

## [Unreleased] - 2025-01-15 - üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker —Å–µ—Ç–∏ –¥–ª—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Docker —Å–µ—Ç–∏
- ‚úÖ **src/instance-manager/services/docker.service.ts** - –¥–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `ensureNetworkExists()`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–µ—Ç–∏ `wweb-network` –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ Docker
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (bridge, subnet: 172.20.0.0/16)
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è/–ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ç–∏
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞

- ‚úÖ **src/instance-manager/utils/docker-compose.utils.ts** - –∏–∑–º–µ–Ω–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ç–∏:
  - –£–±—Ä–∞–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `external: true` –¥–ª—è —Å–µ—Ç–∏ `wweb-network`
  - –°–µ—Ç—å —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ IPAM
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ bridge –¥—Ä–∞–π–≤–µ—Ä–∞ —Å –ø–æ–¥—Å–µ—Ç—å—é 172.20.0.0/16

- ‚úÖ **start-prod.sh** - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏ –≤ production —Å–∫—Ä–∏–ø—Ç–µ:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–µ—Ç–∏ `wweb-network` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Å–µ—Ç–∏

- ‚úÖ **start-dev.sh** - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏ –≤ development —Å–∫—Ä–∏–ø—Ç–µ:
  - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏ –¥–ª—è dev –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É dev –∏ prod –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏

### üìà –£–ª—É—á—à–µ–Ω–∏—è
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å: —Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∏ –Ω–∞ —Ö–æ—Å—Ç–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ development –∏ production –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
- –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å: graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Ç–∏

### ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
- `network wweb-mcp_wweb-network declared as external, but could not be found` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- –ò–Ω—Å—Ç–∞–Ω—Å—ã —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –æ–±—â–µ–π —Å–µ—Ç–∏

## [Unreleased] - 2025-01-02 - üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è Docker —Å–µ—Ç–∏

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "network with name wweb-network already exists"
- ‚úÖ **start-dev.sh** - —É–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è Docker —Å–µ—Ç–∏:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–∏
  - Graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Å–µ—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ—Ç–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

- ‚úÖ **start-prod.sh** - –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è production —Å–∫—Ä–∏–ø—Ç–∞:
  - –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–∏
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Ç–∏
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ —Å–µ—Ç–∏

### üìà –£–ª—É—á—à–µ–Ω–∏—è
- –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å: —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ç–∏
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: –∏—Å–∫–ª—é—á–µ–Ω—ã –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö (Docker Desktop, Colima, Linux)

### ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
- `Error response from daemon: network with name wweb-network already exists` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- –°–∫—Ä–∏–ø—Ç—ã —Ç–µ–ø–µ—Ä—å –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ –¥–∞–∂–µ –ø—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Ç–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã race conditions –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Ç–∏

## [Unreleased] - 2025-01-02 - üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ npm/pnpm –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –Ω–∞ pnpm
- ‚úÖ **package.json** - –∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã `npm run` –Ω–∞ `pnpm run` –≤ scripts:
  - `"dev": "npm run build"` ‚Üí `"dev": "pnpm run build"`
  - `"validate": "npm run lint"` ‚Üí `"validate": "pnpm run lint"`
  - `"prepare": "npm run build"` ‚Üí `"prepare": "pnpm run build"`
  - `"prepublishOnly": "npm run validate"` ‚Üí `"prepublishOnly": "pnpm run validate"`
  - `"postinstall": "npm run build"` ‚Üí `"postinstall": "pnpm run build"`
  - `"test:db": "npm run build"` ‚Üí `"test:db": "pnpm run build"`
  - `"clean:all": "npm run clean"` ‚Üí `"clean:all": "pnpm run clean"`

- ‚úÖ **Dockerfile** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–±–æ—Ä–∫–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è pnpm:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ pnpm –≥–ª–æ–±–∞–ª—å–Ω–æ: `RUN npm install -g pnpm`
  - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ `package.json` –∏ `pnpm-lock.yaml` –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - –ó–∞–º–µ–Ω–∞ `npm ci` –Ω–∞ `pnpm install --frozen-lockfile`
  - –ó–∞–º–µ–Ω–∞ `npm run build` –Ω–∞ `pnpm run build`

- ‚úÖ **Dockerfile.instance-manager** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è pnpm:
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pnpm –≥–ª–æ–±–∞–ª—å–Ω–æ
  - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å COPY –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ–µ–≤
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pnpm install --frozen-lockfile` –≤–º–µ—Å—Ç–æ `npm ci`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pnpm prune --prod` –≤–º–µ—Å—Ç–æ `npm ci --omit=dev`
  - –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

- ‚úÖ **update-production.sh** - —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —Å–±–æ—Ä–∫–∏:
  - –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ `npm run build`
  - –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ `pnpm run build`

### üìã –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

#### –°–º–µ—à–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ npm/pnpm
–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∞–ª mix npm –∏ pnpm –∫–æ–º–∞–Ω–¥, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:
- –ü—Ä–æ–±–ª–µ–º–∞–º —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ Docker
- –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É development –∏ production
- –û—à–∏–±–∫–∞–º —Å–±–æ—Ä–∫–∏ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–∏–ø–æ–≤

#### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Dockerfile
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker layers
- –ú–∏–∫—Å npm/pnpm –∫–æ–º–∞–Ω–¥ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **pnpm** –∫–∞–∫ –µ–¥–∏–Ω—ã–π –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä:
- ‚úÖ –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ package.json –∏—Å–ø–æ–ª—å–∑—É—é—Ç pnpm
- ‚úÖ –í—Å–µ Dockerfile –∏—Å–ø–æ–ª—å–∑—É—é—Ç pnpm
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è —Å–±–æ—Ä–∫–∞ –≤ development –∏ production
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å pnpm-lock.yaml

### üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö
- `package.json` - scripts —Å–µ–∫—Ü–∏—è (7 –∫–æ–º–∞–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–æ)
- `Dockerfile` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–±–æ—Ä–∫–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞
- `Dockerfile.instance-manager` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è Instance Manager
- `update-production.sh` - —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ npm –∫–æ–º–∞–Ω–¥

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pnpm

---

## [Unreleased] - 2025-01-02 - üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ production

### ‚ú® Added
- **üöÄ update-production.sh** - –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π (.env –∏ volumes)
  - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ GitHub
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (pnpm/npm)
  - –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
  - Health check –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ docker-compose.yml, —Ç–∞–∫ –∏ docker-compose.production.yml

### üîß Features
- **üíæ Backup System**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π —Å timestamp
- **üîç Smart Detection**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ package manager (pnpm/npm)
- **üè• Health Monitoring**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **üìã Detailed Logging**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **üîÑ Rollback Support**: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ—Ç–∫–∞—Ç—É –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º

### üìã Usage
```bash
# –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ:
cd /path/to/your/project
./update-production.sh
```

### üéØ –¶–µ–ª—å
–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º downtime –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é.

---

## [2.0.0] - 2025-01-02 üöÄ GitHub Release

### ‚ú® Added
- **üéâ GitHub Repository**: –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ https://github.com/Bakhitov/craftify-messangers
- **üìñ Beautiful README**: –°–æ–∑–¥–∞–Ω –∫—Ä–∞—Å–∏–≤—ã–π README.md —Å —ç–º–æ–¥–∑–∏, –±–µ–π–¥–∂–∞–º–∏ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- **üöÄ AWS Deployment Guide**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ AWS EC2 (AWS_DEPLOYMENT.md)
- **‚öôÔ∏è Environment Templates**: –°–æ–∑–¥–∞–Ω—ã —à–∞–±–ª–æ–Ω—ã .env.development –∏ .env.production
- **üîí Security Improvements**: –û–±–Ω–æ–≤–ª–µ–Ω .gitignore –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **üìä Architecture Diagram**: –î–æ–±–∞–≤–ª–µ–Ω–∞ Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã
- **üõ†Ô∏è Development Commands**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production

### üîß Changed
- **üìù Repository URL**: –ò–∑–º–µ–Ω–µ–Ω remote origin –Ω–∞ –Ω–æ–≤—ã–π GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **üé® Documentation Style**: –£–ª—É—á—à–µ–Ω —Å—Ç–∏–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–º–æ–¥–∑–∏ –∏ —Ç–∞–±–ª–∏—Ü
- **üìã API Documentation**: –ü–µ—Ä–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –≤ —Ç–∞–±–ª–∏—á–Ω—ã–π –≤–∏–¥

### üóÇÔ∏è Files Modified
- `README.md` - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- `.gitignore` - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `AWS_DEPLOYMENT.md` - –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –¥–µ–ø–ª–æ—é
- `.env.development` - –°–æ–∑–¥–∞–Ω —à–∞–±–ª–æ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `.env.production` - –°–æ–∑–¥–∞–Ω —à–∞–±–ª–æ–Ω –¥–ª—è production

### üéØ Next Steps
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD pipeline
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ GitHub Actions
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ Docker Hub –æ–±—Ä–∞–∑–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

–í—Å–µ –≤–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –±—É–¥—É—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

## [Unreleased] - 2025-01-28 - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ Docker –æ–±—Ä–∞–∑–∞

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
- ‚úÖ **install.sh** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ Docker –æ–±—Ä–∞–∑–∞ `wweb-mcp:latest`
  - –ö–æ–º–∞–Ω–¥–∞: `docker build -t wweb-mcp:latest .`
  - –û–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ Instance Manager –æ–±—Ä–∞–∑–æ–º
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏

- ‚úÖ **start-dev.sh** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
  - –°–±–æ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞: `docker build -t wweb-mcp:latest .`
  - –°–±–æ—Ä–∫–∞ Instance Manager –æ–±—Ä–∞–∑–∞: `docker build -f Dockerfile.instance-manager -t wweb-mcp-instance-manager:latest .`
  - –¶–≤–µ—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

- ‚úÖ **start-prod.sh** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è production
  - –°–±–æ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞: `docker build -t wweb-mcp:latest .`
  - –°–±–æ—Ä–∫–∞ Instance Manager –æ–±—Ä–∞–∑–∞: `docker build -f Dockerfile.instance-manager -t wweb-mcp-instance-manager:latest .`
  - Production –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### üéØ –ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:
1. **Instance Manager** (`Dockerfile.instance-manager`) - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. **WhatsApp/Telegram –∏–Ω—Å—Ç–∞–Ω—Å—ã** (`Dockerfile`) - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

–û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–∑ `wweb-mcp:latest` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Instance Manager'–æ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —á–µ—Ä–µ–∑ Docker API, –Ω–æ –Ω–µ —Å–æ–±–∏—Ä–∞–ª—Å—è –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞.

### üìã –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **Instance Manager** - —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ–º/—É–¥–∞–ª–µ–Ω–∏–µ–º –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ (–ø–æ—Ä—Ç 3000)
- **–û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–∑** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è WhatsApp/Telegram –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- **Docker Compose** - –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ Instance Manager, –∏–Ω—Å—Ç–∞–Ω—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –û—Å–Ω–æ–≤–Ω–æ–π Docker –æ–±—Ä–∞–∑ —Ç–µ–ø–µ—Ä—å —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö

## [Completed] - 2025-01-28 - ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase Cloud –ó–ê–í–ï–†–®–ï–ù–ê

### üéâ –ú–∏–≥—Ä–∞—Ü–∏—è –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê!

#### –ü–µ—Ä–µ—Ö–æ–¥ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL –Ω–∞ Supabase Cloud
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: –õ–æ–∫–∞–ª—å–Ω–∞—è PostgreSQL –±–∞–∑–∞ —Å —Å—Ö–µ–º–æ–π `ai`
- **–¶–µ–ª—å**: Supabase Cloud –±–∞–∑–∞ —Å —Å—Ö–µ–º–æ–π `public` ‚úÖ
- **Connection String**: `postgresql://postgres.wyehpfzafbjfvyjzgjss:Ginifi51!@aws-0-eu-north-1.pooler.supabase.com:6543/postgres` ‚úÖ
- **Status**: PRODUCTION READY ‚úÖ

### üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase Cloud —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –°—Ö–µ–º–∞ `public` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ Instance Manager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∏–∑ –ë–î: 2 ‚Üí 7 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤

#### ‚úÖ API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Health check: `http://localhost:3000/health` ‚Üí OK
- ‚úÖ GET `/api/v1/instances` ‚Üí 7 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ Supabase
- ‚úÖ POST `/api/v1/instances` ‚Üí –Ω–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ –°—Ö–µ–º–∞ `public` —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö SQL –∑–∞–ø—Ä–æ—Å–∞—Ö

#### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ Connection pooling —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 6543 (Transaction mode)
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase (< 2 —Å–µ–∫)
- ‚úÖ Stable memory usage –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### ‚úÖ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ **env.supabase** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Supabase Cloud
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
  - SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
  - –°—Ö–µ–º–∞ `public` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  - –ü–æ—Ä—Ç 6543 (Transaction mode)

- ‚úÖ **docker-compose.supabase.yml** - Docker Compose –¥–ª—è Supabase
  - –£–±—Ä–∞–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Supabase Cloud)
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Supabase
  - –Ø–≤–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ `DATABASE_SCHEMA=public`
  - Health check –Ω–∞—Å—Ç—Ä–æ–µ–Ω

#### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë–î
- ‚úÖ **src/config/database.config.ts**
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç `DATABASE_URL` –¥–ª—è Supabase
  - –°—Ö–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∞ —Å `ai` –Ω–∞ `public`
  - SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Supabase Cloud
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã SQL –∑–∞–ø—Ä–æ—Å—ã: `ai.messages` ‚Üí `public.messages`

- ‚úÖ **src/instance-manager/config/database.config.ts**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `DATABASE_*` –¥–ª—è Supabase
  - –°—Ö–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∞ —Å `ai` –Ω–∞ `public`
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã SQL –∑–∞–ø—Ä–æ—Å—ã: `ai.message_instances` ‚Üí `public.message_instances`

#### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ **src/services/message-storage.service.ts**
  - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: —Å—Ö–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∞ —Å `ai` –Ω–∞ `public`

- ‚úÖ **src/instance-manager/services/database.service.ts**
  - –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: `ai.message_instances` ‚Üí `public.message_instances`
  - `getInstanceById()`, `getAllInstances()`, `createInstance()`, etc.

- ‚úÖ **src/services/agno-integration.service.ts**
  - SQL –∑–∞–ø—Ä–æ—Å –æ–±–Ω–æ–≤–ª–µ–Ω: `ai.message_instances` ‚Üí `public.message_instances`

#### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ **TESTING_GUIDE_NEW.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –¥–ª—è Supabase
- ‚úÖ **CHANGELOG.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase Cloud

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|----------|---------|
| **Host** | `aws-0-eu-north-1.pooler.supabase.com` | ‚úÖ |
| **Port** | `6543` (Transaction mode) | ‚úÖ |
| **Database** | `postgres` | ‚úÖ |
| **User** | `postgres.wyehpfzafbjfvyjzgjss` | ‚úÖ |
| **Schema** | `public` | ‚úÖ |
| **SSL** | `required` | ‚úÖ |

#### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è
```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Supabase (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
cp env.supabase .env
docker-compose -f docker-compose.supabase.yml up -d --build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:3000/health
curl http://localhost:3000/api/v1/instances
```

### üö® –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã)
- ‚ùå `scripts/switch-to-supabase.sh` - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–µ –Ω—É–∂–µ–Ω
- ‚ùå `scripts/switch-to-local.sh` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Supabase
- ‚ùå `scripts/migrate-schema.sql` - —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- ‚ùå `scripts/create-supabase-tables.sql` - —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã

### üîç –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —Å—Ö–µ–º–µ –¥–∞–Ω–Ω—ã—Ö
- **–ë–´–õ–û**: `ai.message_instances`, `ai.messages` (–ª–æ–∫–∞–ª—å–Ω–∞—è PostgreSQL)
- **–°–¢–ê–õ–û**: `public.message_instances`, `public.messages` (Supabase Cloud)
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: 100% - –≤—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–î–∞–Ω–Ω—ã–µ**: –ù–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Supabase

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
‚úÖ **–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ Supabase Cloud**  
‚úÖ **–°—Ö–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ —Å `ai` –Ω–∞ `public`**  
‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  
‚úÖ **Production ready –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 30 –º–∞—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ü–†–û–ô–î–ï–ù–û  
**Production**: ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

## [Unreleased] - 2025-01-28 - –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤

### üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ

#### –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ **–ü–∞–ø–∫–∞ test/** - —É–¥–∞–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ –≤—Å–µ–º–∏ unit —Ç–µ—Å—Ç–∞–º–∏
  - `test/unit/api.test.ts` - —Ç–µ—Å—Ç—ã –¥–ª—è API —Ä–æ—É—Ç–æ–≤
  - `test/unit/mcp-server.test.ts` - —Ç–µ—Å—Ç—ã –¥–ª—è MCP —Å–µ—Ä–≤–µ—Ä–∞
  - `test/unit/utils.test.ts` - —Ç–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
  - `test/unit/whatsapp-client.test.ts` - —Ç–µ—Å—Ç—ã WhatsApp –∫–ª–∏–µ–Ω—Ç–∞  
  - `test/unit/whatsapp-service.test.ts` - —Ç–µ—Å—Ç—ã WhatsApp —Å–µ—Ä–≤–∏—Å–∞
  - `test/setup.ts` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

#### –¢–µ—Å—Ç–æ–≤—ã–µ –∏ –¥–µ–º–æ —Ñ–∞–π–ª—ã JavaScript
- ‚úÖ **test-integration.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **telegram-fixed-test.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **telegram-instance-test.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **test-telegram-integration.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **quick-telegram-test.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **test-db-connection.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **telegram-integration-test.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **telegram-api-demo.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **example-telegram.js** - —É–¥–∞–ª–µ–Ω

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **jest.config.js** - —É–¥–∞–ª–µ–Ω
- ‚úÖ **tsconfig.test.json** - —É–¥–∞–ª–µ–Ω

#### –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ package.json
- ‚úÖ **Scripts**: –£–¥–∞–ª–µ–Ω—ã `test`, `test:watch`, `test:coverage`, `test:integration`, `test:e2e`
- ‚úÖ **DevDependencies**: –£–¥–∞–ª–µ–Ω—ã `@types/jest`, `@types/supertest`, `eslint-plugin-jest`, `jest`, `supertest`, `ts-jest`
- ‚úÖ **Scripts**: –û–±–Ω–æ–≤–ª–µ–Ω `format` (—É–±—Ä–∞–Ω–∞ –ø–∞–ø–∫–∞ test), `validate` (—É–±—Ä–∞–Ω –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤)

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–ß–∏—Å—Ç—ã–π –ø—Ä–æ–µ–∫—Ç**: –£–¥–∞–ª–µ–Ω–∞ –≤—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω—ã –¥–µ–º–æ –∏ –ø—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä devDependencies
- ‚úÖ **–§–æ–∫—É—Å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω**: –ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–†–ò–ú–ï–ù–ï–ù–û** - –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω—ã

## [Unreleased] - 2025-01-28 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### API Endpoints –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **src/api.ts** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `/api/v1/*` –≤–º–µ—Å—Ç–æ `/api/*`
  - `/api/v1/status` –≤–º–µ—Å—Ç–æ `/api/status`
  - `/api/v1/health` –≤–º–µ—Å—Ç–æ `/api/health`
  - `/api/v1/contacts` –≤–º–µ—Å—Ç–æ `/api/contacts`
  - `/api/v1/chats` –≤–º–µ—Å—Ç–æ `/api/chats`
  - `/api/v1/send` –≤–º–µ—Å—Ç–æ `/api/send`
  - `/api/v1/groups` –≤–º–µ—Å—Ç–æ `/api/groups`
  - `/api/v1/messages/{messageId}/media/download` –≤–º–µ—Å—Ç–æ `/api/messages/{messageId}/media/download`
  - `/api/v1/send/media` –≤–º–µ—Å—Ç–æ `/api/send/media`

#### Main.ts WhatsApp API Server
- ‚úÖ **src/main.ts** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ API –≤ WhatsApp API —á–∞—Å—Ç–∏:
  - –ü—É–±–ª–∏—á–Ω—ã–µ –ø—É—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ `/api/v1/status`, `/api/v1/health`
  - –†–æ—É—Ç–µ—Ä —Ç–µ–ø–µ—Ä—å –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `/api/v1` –≤–º–µ—Å—Ç–æ `/api`
  - Health endpoint –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `/api/v1/health`
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π

#### Main.ts Telegram API Server  
- ‚úÖ **src/main.ts** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ API –≤ Telegram API —á–∞—Å—Ç–∏:
  - –ü—É–±–ª–∏—á–Ω—ã–µ –ø—É—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ `/api/v1/telegram/status`, `/api/v1/telegram/health`
  - Health endpoint –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ `/api/v1/telegram/health`
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π

#### Router paths –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ **src/api.ts** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—É—Ç–∏ —Ä–æ—É—Ç–æ–≤:
  - `/stored-messages` –≤–º–µ—Å—Ç–æ `/v1/stored-messages` (—Ç–∞–∫ –∫–∞–∫ —Ä–æ—É—Ç–µ—Ä –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `/api/v1`)
  - `/account-info` –≤–º–µ—Å—Ç–æ `/v1/account-info`
  - `/webhook/config` –≤–º–µ—Å—Ç–æ `/v1/webhook/config`

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º**: –í—Å–µ API endpoints —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–µ—Ä—Å–∏—é v1
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: WhatsApp, Telegram –∏ Instance Manager API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ  
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö endpoints
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ v1 –ø—É—Ç–∏

### üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/main.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API –¥–ª—è WhatsApp –∏ Telegram —Å–µ—Ä–≤–µ—Ä–æ–≤
- `src/api.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—É—Ç–∏ —Ä–æ—É—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–†–ò–ú–ï–ù–ï–ù–û** - –í—Å–µ API endpoints —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–µ—Ä—Å–∏—é v1 —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

## [Unreleased] - 2025-01-28 - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π agent_id, user_id –∏ agno_enable

### üóÑÔ∏è –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è 007_add_agent_user_agno_fields.sql
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `ai.message_instances`:

##### üìÅ **–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- ‚úÖ **agent_id** (VARCHAR(255), DEFAULT NULL) - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–≥–µ–Ω—Ç–∞, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Å
- ‚úÖ **user_id** (VARCHAR(255), DEFAULT NULL) - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏–Ω—Å—Ç–∞–Ω—Å–∞  
- ‚úÖ **agno_enable** (BOOLEAN, DEFAULT TRUE) - —Ñ–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π agno –¥–ª—è –∏–Ω—Å—Ç–∞–Ω—Å–∞

##### üìä **–°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- `idx_message_instances_agent_id` - –∏–Ω–¥–µ–∫—Å –ø–æ agent_id
- `idx_message_instances_user_id` - –∏–Ω–¥–µ–∫—Å –ø–æ user_id
- `idx_message_instances_agno_enable` - –∏–Ω–¥–µ–∫—Å –ø–æ agno_enable
- `idx_message_instances_user_agent` - —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å (user_id, agent_id)
- `idx_message_instances_agno_agent` - —á–∞—Å—Ç–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ (WHERE agno_enable = TRUE)

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª–µ–π:
- **agent_id**: –ü–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∞–≥–µ–Ω—Ç–∞–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **user_id**: –û–±–µ—Å–ø–µ—á–∏—Ç —Å–≤—è–∑—å –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã
- **agno_enable**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏–µ–º/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π agno –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞

#### üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π
cd db/migrations

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–≤—Ä—É—á–Ω—É—é)
psql -U ai -d ai -f versions/007_add_agent_user_agno_fields.sql
```

#### üìã –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:
- **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π –∏ –∏–Ω–¥–µ–∫—Å–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ–ª—è–º –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

### üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `db/migrations/versions/007_add_agent_user_agno_fields.sql` - –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–°–û–ó–î–ê–ù–ê** - –§–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –≤—Ä—É—á–Ω—É—é

## [Unreleased] - 2025-01-28 - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤

#### –ü—Ä–æ–±–ª–µ–º–∞
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥—Ä–∞–π–≤–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è `json-file` –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–º–µ—Ä –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- –õ–æ–≥–∏ –º–æ–≥–ª–∏ —Ä–∞—Å—Ç–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—é –¥–∏—Å–∫–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

##### üìÅ **docker-compose.production.yml** - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –¥–ª—è production
- ‚úÖ **postgres**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 50m, max-file: 4
- ‚úÖ **instance-manager**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 100m, max-file: 4  
- ‚úÖ **nginx**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 50m, max-file: 4

##### üìÅ **docker-compose.instance-manager.yml** - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –¥–ª—è development
- ‚úÖ **instance-manager**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 100m, max-file: 4

##### üìÅ **docker-compose.yml** - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –¥–ª—è —à–∞–±–ª–æ–Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤  
- ‚úÖ **whatsapp-api**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 100m, max-file: 4
- ‚úÖ **telegram-api**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 100m, max-file: 4
- ‚úÖ **mcp-server**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 50m, max-file: 4

##### üìÅ **src/instance-manager/utils/docker-compose.utils.ts** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- ‚úÖ **API —Å–µ—Ä–≤–∏—Å—ã**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 100m, max-file: 4 –¥–ª—è –≤—Å–µ—Ö –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ **MCP —Å–µ—Ä–≤–∏—Å—ã**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - max-size: 50m, max-file: 4 –¥–ª—è –≤—Å–µ—Ö –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö MCP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

#### üéØ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
```yaml
logging:
  driver: "json-file"
  options:
    max-size: "100m"    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –ª–æ–≥-—Ñ–∞–π–ª–∞
    max-file: "4"       # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ (4 —Ñ–∞–π–ª–∞ ‚âà 4 –¥–Ω—è)
```

#### üìä –†–∞—Å—á–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤
- **API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: 100MB √ó 4 —Ñ–∞–π–ª–∞ = 400MB –º–∞–∫—Å–∏–º—É–º –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã**: 50MB √ó 4 —Ñ–∞–π–ª–∞ = 200MB –º–∞–∫—Å–∏–º—É–º –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä  
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è**: –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- **–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è**: ‚âà 4 –¥–Ω—è –ª–æ–≥–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)

#### üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è  
docker-compose up -d --build
```

### üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `docker-compose.production.yml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- `docker-compose.instance-manager.yml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ –¥–ª—è development
- `docker-compose.yml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ –¥–ª—è —à–∞–±–ª–æ–Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- `src/instance-manager/utils/docker-compose.utils.ts` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤**: –ú–∞–∫—Å–∏–º—É–º 400MB –Ω–∞ API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, 200MB –Ω–∞ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è**: –°—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏—Å–∫–∞**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –ª–æ–≥–æ–≤
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤**: 4 –¥–Ω—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–†–ò–ú–ï–ù–ï–ù–û** - –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## [Unreleased] - 2025-01-15 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π WhatsApp

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

#### –ü—Ä–æ–±–ª–µ–º–∞
- –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ WhatsApp, –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ MCP
- –ü–æ–ª–µ `is_from_me` –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `ai.messages` –≤ –º–∏–≥—Ä–∞—Ü–∏–∏ 004, –Ω–æ –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–ª –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ webhook'–∏ –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –í –ª–æ–≥–∞—Ö –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

##### üìÅ **src/whatsapp-client.ts** - –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ `message_create`**: –î–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`fromMe = true`)
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î**: –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å `is_from_me: true`
- ‚úÖ **Webhook –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö**: –û—Ç–ø—Ä–∞–≤–∫–∞ webhook'–æ–≤ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ (`fromMe: true`, `to`, `from`)
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ `is_from_me: false`

##### üìÅ **src/services/message-storage.service.ts** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–æ—Ç–æ–≤
- ‚úÖ **MessageData interface**: –ü–æ–ª–µ `is_from_me?: boolean` —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ **SQL –∑–∞–ø—Ä–æ—Å—ã**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `is_from_me` –≤ –ë–î
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**: ON CONFLICT –æ–±–Ω–æ–≤–ª—è–µ—Ç `is_from_me` –ø—Ä–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–∏

#### üóÑÔ∏è **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è

##### üìÑ **restore_is_from_me.sql** - SQL –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—è
```sql
-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è is_from_me
ALTER TABLE ai.messages ADD COLUMN is_from_me BOOLEAN DEFAULT FALSE;

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
CREATE INDEX idx_messages_is_from_me ON ai.messages(is_from_me);
CREATE INDEX idx_messages_instance_is_from_me ON ai.messages(instance_id, is_from_me);

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π (–≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ = –≤—Ö–æ–¥—è—â–∏–µ)
UPDATE ai.messages SET is_from_me = FALSE WHERE is_from_me IS NULL;

-- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NOT NULL –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
ALTER TABLE ai.messages ALTER COLUMN is_from_me SET NOT NULL;
```

##### üìÑ **run_fix_messages.sh** - –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```bash
#!/bin/bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL —á–µ—Ä–µ–∑ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL
docker exec -i agent-api-pgvector-1 psql -U ai -d ai < restore_is_from_me.sql
```

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è SQL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:
- ‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Ö –≤ –ë–î** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–ª–∞–≥–æ–º `is_from_me = true`
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å webhook'–∏** –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ñ–ª–∞–≥–æ–º `fromMe: true`
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ **–†–∞–∑–ª–∏—á–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —Å–æ–æ–±—â–µ–Ω–∏–π –≤ API –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö

### üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ/—Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `restore_is_from_me.sql` - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—è –≤ –ë–î  
- `run_fix_messages.sh` - bash —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ö–æ–¥ –≤ `src/whatsapp-client.ts` –∏ `src/services/message-storage.service.ts` —É–∂–µ –≥–æ—Ç–æ–≤

### üö® –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å: `chmod +x run_fix_messages.sh`
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å: `./run_fix_messages.sh`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å WhatsApp –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker compose up -d --build`

**–°—Ç–∞—Ç—É—Å**: ‚è≥ **–ì–û–¢–û–í–û –ö –ü–†–ò–ú–ï–ù–ï–ù–ò–Æ** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL)

## [Unreleased] - 2025-01-28 - –û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞ –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–æ–ª–µ–π

### üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ

#### –ü–æ–ª–µ memory_last_sync –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
- **src/instance-manager/models/instance.model.ts**: –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ `memory_last_sync` –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `MessageInstance`
- **src/instance-manager/services/database.service.ts**: –£–¥–∞–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—è `memory_last_sync`
  - –£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥ `updateMemorySyncTimestamp()`
  - –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `memory_last_sync` –≤ –º–µ—Ç–æ–¥–µ `syncExistingDataToMemory()`
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–∞–º—è—Ç—å—é

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã `instanceMemoryService.setInstance()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `InstanceMemoryData`
- –ü–æ–ª–µ —É–¥–∞–ª–µ–Ω–æ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é (–º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/instance-manager/models/instance.model.ts` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—è memory_last_sync
- `src/instance-manager/services/database.service.ts` - —É–¥–∞–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ memory_last_sync

## [Unreleased] - 2025-01-15 - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Telegram API

## [0.2.7] - 2025-01-15 - –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### üß™ **TESTING_GUIDE_NEW.md** - –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- **–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç-–≥–∞–π–¥** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ wweb-mcp v0.2.4
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - Instance Manager (–ø–æ—Ä—Ç 3000) —Å API v1 endpoints
  - WhatsApp Instances (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã) —Å REST API
  - Telegram Instances (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã) —Å grammY –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
  - MCP Server –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã**: –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö 4 —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã
  - `instance-manager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏
  - `whatsapp-api` - standalone WhatsApp API
  - `telegram-api` - standalone Telegram API  
  - `mcp` - MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
- –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .env –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL (—Å—Ö–µ–º–∞ `ai`)
- Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ—Ä—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π

#### üéØ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Instance Manager**
- **–ü–æ–¥—Ä–æ–±–Ω—ã–µ API endpoints** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ curl –∫–æ–º–∞–Ω–¥
- **–ü–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤**: —Å–æ–∑–¥–∞–Ω–∏–µ ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã**: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤**: –ø–æ—Ä—Ç—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, health checks
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è lifecycle

#### üì± **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ WhatsApp API**  
- **Standalone –∏ —á–µ—Ä–µ–∑ Instance Manager**: –æ–±–∞ —Å–ø–æ—Å–æ–±–∞ –∑–∞–ø—É—Å–∫–∞
- **API Endpoints**: –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ QR –∫–æ–¥
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –º–µ–¥–∏–∞
  - –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ —á–∞—Ç–∞–º–∏
  - –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- **Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Å INSTANCE_ID
- **–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** —Å —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏

#### üí¨ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram API**
- **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å grammY**: –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π  
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API –∫–ª—é—á–∏**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bot_token –∏–∑ –ë–î
- **Instance Manager –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —á–µ—Ä–µ–∑ API
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç**: –ø–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `test-telegram-full.js`
- **Docker —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ª–æ–≥–∏, —Å—Ç–∞—Ç—É—Å—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### üß™ **Unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- **–ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤**: 5 —Ñ–∞–π–ª–æ–≤ unit —Ç–µ—Å—Ç–æ–≤ —Å 70-90% –ø–æ–∫—Ä—ã—Ç–∏–µ–º
- **–ü–ª–∞–Ω —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**: —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è Instance Manager –∏ Telegram
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–∫—Ä—ã—Ç–∏—è**: –¥–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- **–ü—Ä–∏–º–µ—Ä—ã –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**: –≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### üîó **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –∏ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- **–ú–µ–∂–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Instance Manager ‚Üî WhatsApp/Telegram
- **–ü–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**: –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ —É–¥–∞–ª–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ E2E —Å–∫—Ä–∏–ø—Ç—ã**: bash —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è CI/CD
- **Multi-provider —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ WhatsApp –∏ Telegram

#### ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
- **CI/CD –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã**: GitHub Actions workflow
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: Docker stats, –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
- **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã

#### üõ†Ô∏è **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫**
- **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**: –ø–æ—Ä—Ç—ã, Docker, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã**: –≥–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤**: Instance Manager –∏ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã
- **–°–∫—Ä–∏–ø—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### üéØ **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö API endpoints
- ‚úÖ Instance Manager –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω  
- ‚úÖ WhatsApp –∏ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚è≥ 90%+ –ø–æ–∫—Ä—ã—Ç–∏–µ unit —Ç–µ—Å—Ç–∞–º–∏ (–ø–ª–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è)
- ‚è≥ E2E —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (—Å–∫—Ä–∏–ø—Ç—ã –≥–æ—Ç–æ–≤—ã)
- ‚è≥ CI/CD –ø–∞–π–ø–ª–∞–π–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω (workflow –≥–æ—Ç–æ–≤)

### üìä **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã**: Instance Manager –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ø–æ—Ä—Ç—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 3001-7999
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: 
  - Telegram: bot_token –∏–∑ –ø–æ–ª—è `api_key` –≤ –ë–î
  - WhatsApp: INSTANCE_ID –∫–∞–∫ Bearer —Ç–æ–∫–µ–Ω
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: –∫–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **–ú—É–ª—å—Ç–∏–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω–æ—Å—Ç—å**: WhatsApp –∏ Telegram –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **Instance Memory Service**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üìù **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ/—Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**
- `TESTING_GUIDE_NEW.md` - –Ω–æ–≤–æ–µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (1069 —Å—Ç—Ä–æ–∫)
- –ê–Ω–∞–ª–∏–∑: `src/`, `test/`, `docker-compose.yml`, `package.json`
- –ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ v0.2.4

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**  
**–ê–≤—Ç–æ—Ä**: AI Assistant –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞  
**–î–∞—Ç–∞**: 15 —è–Ω–≤–∞—Ä—è 2025

## [0.2.6] - 2025-01-28 - Development Environment —Å Hot Reload

### üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### üî• **Hot Reload Development Environment**
- **Volume mounting –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ —Å—Ä–∞–∑—É –ø–æ–ø–∞–¥–∞—é—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω mapping `./dist:/app/dist` –¥–ª—è —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω mapping `./src:/app/src` –¥–ª—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ TypeScript –∫–æ–¥–∞
  - –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞

- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
  - `./dev-watch.sh` - –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –∑–∞–ø—É—Å–∫ IM + TypeScript watch
  - `npm run dev:watch` - –∑–∞–ø—É—Å–∫ development environment
  - `npm run build:watch` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
  - `npm run docker:dev` - –∑–∞–ø—É—Å–∫ Instance Manager –≤ development —Ä–µ–∂–∏–º–µ

### üîß –£–ª—É—á—à–µ–Ω–∏–π

#### üìÅ **–ù–æ–≤—ã–µ npm —Å–∫—Ä–∏–ø—Ç—ã**
- `npm run docker:dev` - –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏
- `npm run docker:restart` - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `npm run docker:rebuild` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- `npm run docker:logs` - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

#### üõ†Ô∏è **Development Workflow**
- **–ë—ã—Å—Ç—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –≤–∏–¥–Ω—ã —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
- **Selective rebuilds**: –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `package.json`
- **Volume persistence**: –ª–æ–≥–∏ –∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- **Hot recompilation**: TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### üìñ **–ù–æ–≤—ã–π —Ñ–∞–π–ª**: `DEVELOPMENT.md`
- –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å hot reload
- Troubleshooting –∏ –æ—Ç–ª–∞–¥–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è workflow –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### üß™ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
- ‚úÖ Volume mounting —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ Health endpoint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç development —Ä–µ–∂–∏–º
- ‚úÖ –õ–æ–≥–∏ –∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

### üì¶ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `docker-compose.instance-manager.yml` - –¥–æ–±–∞–≤–ª–µ–Ω volume mounting –¥–ª—è development
- `dev-watch.sh` - –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `package.json` - –Ω–æ–≤—ã–µ npm —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è development workflow
- `DEVELOPMENT.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- `src/instance-manager/main-instance-manager.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ development —Ä–µ–∂–∏–º–µ

## [0.2.6] - 2025-05-28 - –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è API –∫–ª—é—á–µ–π –¥–ª—è Telegram

### üîß –ò–∑–º–µ–Ω–µ–Ω–æ
- **src/main.ts**: –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `getTelegramApiKey()` –¥–ª—è Telegram API
  - –¢–µ–ø–µ—Ä—å –¥–ª—è HTTP API —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ `api_key` –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –∏ –¥–ª—è Telegram bot token
  - –£–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `INSTANCE_ID` –∫–∞–∫ API –∫–ª—é—á–∞
  - HTTP —Å–µ—Ä–≤–µ—Ä –∏ Telegram –±–æ—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ –ø–æ–ª—è `api_key` –≤ –ë–î
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API –∫–ª—é—á–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å —Ç–µ—Å—Ç–æ–≤—ã–º –∏–Ω—Å—Ç–∞–Ω—Å–æ–º `2054c7bd-bbb9-4ddf-8490-0706413a36e2`
- ‚úÖ Bot token –∏ API –∫–ª—é—á –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è `api_key` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ HTTP API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Bearer —Ç–æ–∫–µ–Ω–æ–º –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Telegram –±–æ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç/–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ API endpoint `/api/v1/telegram/send`

### üê≥ Docker —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û**
- ‚úÖ **Instance Manager**: –ó–∞–ø—É—â–µ–Ω –≤ Docker, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Telegram –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**: –°–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ Instance Manager API —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
- ‚úÖ **API –∫–ª—é—á –∏–∑ –ë–î**: –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ø–æ–ª—è `api_key` –≤–º–µ—Å—Ç–æ INSTANCE_ID  
- ‚úÖ **HTTP API —Å–µ—Ä–≤–µ—Ä**: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 5259, –≤—Å–µ endpoints –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **Telegram Bot**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `@salesBotsalesBot`, polling –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**: MessageId 33 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 134527512
- ‚úÖ **Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–æ–∫–µ–Ω–æ–º `7961413009:AAGEp-pakPC5OmvgTyXBLmNGoSlLdCAzg28`

### üê≥ **WhatsApp Docker —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û**
- ‚úÖ **WhatsApp –∏–Ω—Å—Ç–∞–Ω—Å**: –°–æ–∑–¥–∞–Ω ID `afa07d6c-4705-49fa-9ff3-a3a42bf466f1`, –ø–æ—Ä—Ç 7199
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –£—Å–ø–µ—à–Ω–∞—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `77066318623@c.us` (–†–∞–±–æ—á–∏–π)
- ‚úÖ **API —Å—Ç–∞—Ç—É—Å**: `connected`, —Å–æ—Å—Ç–æ—è–Ω–∏–µ `READY`
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**: MessageId `3EB07FAFB34A12345CF1D9` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 77475318623
- ‚úÖ **API –∫–ª—é—á–∏**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç INSTANCE_ID –∫–∞–∫ Bearer —Ç–æ–∫–µ–Ω
- ‚úÖ **Endpoint**: `/api/send` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/main.ts` - –∏–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `getTelegramApiKey()` –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ API –∫–ª—é—á–µ–π
- `TESTING_GUIDE.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ Docker —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `CHANGELOG_NEW_SECTION.md` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–µ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

# CHANGELOG - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—è account

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç ${new Date().toISOString().split('T')[0]}

### ‚úÖ –ü—É–Ω–∫—Ç 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è account —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–û–ø–∏—Å–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `account` –≤ —Ç–∞–±–ª–∏—Ü–µ `message_instances` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WhatsApp –∏ Telegram –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.

#### üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

##### 1. `src/whatsapp-client.ts`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –§—É–Ω–∫—Ü–∏—è `updateAccountInfo()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—è account –≤ –ë–î
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ò–º–ø–æ—Ä—Ç `createPool, getDatabaseConfig` –∏–∑ database.config
- **–ò–∑–º–µ–Ω–µ–Ω–æ**: –°–æ–±—ã—Ç–∏–µ `ready` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ `account` –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–£–±—Ä–∞–Ω–æ**: –ü–æ–ª–µ `is_from_me` –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–æ–≥–ª–∞—Å–Ω–æ –ø—É–Ω–∫—Ç—É 7 –ø–ª–∞–Ω–∞)

```typescript
// –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
async function updateAccountInfo(instanceId: string, accountInfo: string): Promise<void>

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Å–æ–±—ã—Ç–∏–∏ ready
if (config.instanceId && client.info?.wid?.user) {
  await updateAccountInfo(config.instanceId, client.info.wid.user);
}
```

##### 2. `src/providers/telegram-provider.ts`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ú–µ—Ç–æ–¥ `updateAccountInfo()` –≤ –∫–ª–∞—Å—Å–µ TelegramProvider
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ò–º–ø–æ—Ä—Ç `createPool, getDatabaseConfig` –∏–∑ database.config
- **–ò–∑–º–µ–Ω–µ–Ω–æ**: –ú–µ—Ç–æ–¥ `initialize()` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ `account` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ—Ç–µ

```typescript
// –ù–æ–≤—ã–π –º–µ—Ç–æ–¥
private async updateAccountInfo(accountInfo: string): Promise<void>

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ initialize()
if (this.instanceId) {
  const botInfo = `${me.first_name}${me.username ? ` (@${me.username})` : ''}`;
  await this.updateAccountInfo(botInfo);
}
```

#### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:
- **WhatsApp**: –ü–æ–ª–µ `account` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: "79001234567")
- **Telegram**: –ü–æ–ª–µ `account` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è –∏ username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "MyBot (@mybotusername)")
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞/–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. –ü—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ WhatsApp –∫–ª–∏–µ–Ω—Ç–∞ (`ready` event) - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `client.info.wid.user`
2. –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram –±–æ—Ç–∞ (`initialize()`) - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `${first_name} (@username)`
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î —á–µ—Ä–µ–∑ pool.query
4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è instanceId –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º

#### ‚úÖ –°—Ç–∞—Ç—É—Å: **–ó–ê–í–ï–†–®–ï–ù–û**
- –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

# Changelog - Next Release

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ DEVELOPMENT_PLAN_FINAL.md

### ‚úÖ –ü—É–Ω–∫—Ç 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è API –∫–ª—é—á–µ–π WhatsApp
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/main.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è API –∫–ª—é—á–∞ –≤ –ë–î –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `process.env.INSTANCE_ID`
- `src/instance-manager/services/instance-memory.service.ts` - —É–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `saveApiKey` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–ª–∞–≥–∞ `saveToDb`, –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `updateApiKeyInDatabase`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è: —Å INSTANCE_ID —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î, –±–µ–∑ –Ω–µ–≥–æ —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è API –∫–ª—é—á–µ–π –º–µ–∂–¥—É –ø–∞–º—è—Ç—å—é –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å —Ñ–ª–∞–≥–æ–º `saveToDb`

### ‚úÖ –ü—É–Ω–∫—Ç 3: –£–±—Ä–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å health/status endpoints
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/main.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ü—É–±–ª–∏—á–Ω—ã–µ –ø—É—Ç–∏ `['/api/status', '/api/health']` —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö API endpoints

### ‚úÖ –ü—É–Ω–∫—Ç 9: API endpoints –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/api.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ endpoints –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è webhook –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- `src/telegram-api.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ endpoints –¥–ª—è Telegram API

**–ù–æ–≤—ã–µ endpoints –≤ WhatsApp API:**
- `GET /api/v1/account-info` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ
- `POST /api/v1/webhook/config` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ webhook
- `GET /api/v1/webhook/config` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ webhook

**–ù–æ–≤—ã–µ endpoints –≤ Telegram API:**
- `GET /account-info` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ
- `POST /webhook/config` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ webhook
- `GET /webhook/config` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ webhook

### ‚úÖ –ü—É–Ω–∫—Ç 10: Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
- `src/services/webhook.service.ts` - –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/providers/telegram-provider.ts` - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω webhook service –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω `WebhookService` —Å –º–µ—Ç–æ–¥–æ–º `sendToWebhook` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ HTTP POST –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `WebhookMessageData` –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã webhook —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω webhook –≤ Telegram –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ –º–µ—Ç–æ–¥–µ `setupEventHandlers`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ webhook –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–π–º–∞—É—Ç 15 —Å–µ–∫—É–Ω–¥ –¥–ª—è webhook –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚úÖ –ü—É–Ω–∫—Ç 11: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —á–µ—Ä–µ–∑ Instance Manager API
**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
- `src/utils/instance-manager.client.ts` - —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Instance Manager API
- `docs/INSTANCE_MANAGER_API.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Instance Manager API

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ö–ª–∞—Å—Å `InstanceManagerClient` —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
- –ú–µ—Ç–æ–¥—ã `createWhatsAppInstance` –∏ `createTelegramInstance` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: start, stop, restart, delete –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- –ú–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: API –∫–ª—é—á–∏, –ª–æ–≥–∏, —Å—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `instanceManagerClient` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ TypeScript
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö API endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫

### ‚úÖ SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (–ü—É–Ω–∫—Ç—ã 4, 5, 7)
**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
- `db/migrations/versions/004_cleanup_schema.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ö–µ–º—ã –ë–î

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ü—É–Ω–∫—Ç 4: –£–¥–∞–ª–µ–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–æ–ª—è `last_heartbeat`, `config`, `auth_data` –∏–∑ `message_instances`
- –ü—É–Ω–∫—Ç 5: –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è `auth_status` VARCHAR(50) —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º 'pending' –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞ –∏ `account` VARCHAR(255) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, username –±–æ—Ç–∞)
- –ü—É–Ω–∫—Ç 7: –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ `is_from_me` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `messages`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ç–∞–±–ª–∏—Ü–∞–º –∏ —Å—Ç–æ–ª–±—Ü–∞–º –¥–ª—è –ª—É—á—à–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–≤—à–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
**–ü—É–Ω–∫—Ç 1: –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î**
- –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –º–µ—Ç–æ–¥–∞—Ö `sendMessage` –∏ `sendTelegramMessage` –≤ `src/providers/telegram-provider.ts`

**–ü—É–Ω–∫—Ç 8: –ü–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è + —Ñ–∞–º–∏–ª–∏—è + username)**
- –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –º–µ—Ç–æ–¥–µ `getFullContactName` –≤ `src/providers/telegram-provider.ts`

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –û—Ç–¥–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ webhook –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤

### –¢–∏–ø–∏–∑–∞—Ü–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö API
- –£–ª—É—á—à–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è webhook –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ Instance Manager API

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –°–æ–∑–¥–∞–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Instance Manager API
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ TypeScript
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –Ω–æ–≤—ã–µ endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

## –ò—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

–ò–∑ 11 –ø—É–Ω–∫—Ç–æ–≤ –ø–ª–∞–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- ‚úÖ **11/11 –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ**
- ‚úÖ **SQL –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã**
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞**
- ‚úÖ **Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**
- ‚úÖ **Instance Manager API client —Å–æ–∑–¥–∞–Ω**

–í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ DEVELOPMENT_PLAN_FINAL.md –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## [0.2.5] - 2025-01-15

### üîß –£–ø—Ä–æ—â–µ–Ω–∏–µ Telegram API

#### –ò–∑–º–µ–Ω–µ–Ω–æ
- **src/instance-manager/api/v1/instances.ts**: –ò–∑–º–µ–Ω–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è Telegram —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ - —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç—Å—è `api_key` –≤ –∫–æ—Ä–Ω–µ –∑–∞–ø—Ä–æ—Å–∞ –≤–º–µ—Å—Ç–æ `config.bot_token`
- **src/instance-manager/services/database.service.ts**: –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `createInstance` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è `api_key`
- **src/instance-manager/utils/docker-compose.utils.ts**: –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è bot token - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `instance.api_key` –≤–º–µ—Å—Ç–æ `instance.api_webhook_schema.bot_token`
- **TESTING_GUIDE_NEW.md**: –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è Telegram —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

#### –£–ø—Ä–æ—â–µ–Ω–∏—è
- –£–±—Ä–∞–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å `config.bot_token` –¥–ª—è Telegram
- –£–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `api_webhook_schema` –¥–ª—è Telegram
- Telegram bot token —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –ø–æ–ª–µ `api_key`

#### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è Telegram —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
```json
{
  "user_id": "test-user",
  "provider": "telegram", 
  "type_instance": ["api"],
  "api_key": "YOUR_BOT_TOKEN"
}
```

#### –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
```json
{
  "user_id": "test-user",
  "provider": "telegram",
  "type_instance": ["api"], 
  "config": {
    "bot_token": "YOUR_BOT_TOKEN"
  },
  "api_webhook_schema": { ... }
}
```

### üìã –ú–∏–≥—Ä–∞—Ü–∏—è
–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Telegram —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã, —Ç–∞–∫ –∫–∞–∫ bot_token —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª–µ `api_key`.

## [Unreleased] - 2025-01-15

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–°–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Instance Manager ‚Üî WhatsApp**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Instance Manager –∫ WhatsApp —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º
  - `src/instance-manager/utils/docker-compose.utils.ts`: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –µ–¥–∏–Ω–∞—è —Å–µ—Ç—å `wweb-network` –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
  - `src/instance-manager/services/instance-monitor.service.ts`: –ó–∞–º–µ–Ω–µ–Ω—ã localhost URL –Ω–∞ –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –º–µ—Ç–æ–¥–∞—Ö:
    - `getCredentials()`: –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `NamingUtils.getApiContainerName()` –∏ `NamingUtils.getMcpContainerName()`
    - `checkInstanceHealth()`: –û–±–Ω–æ–≤–ª–µ–Ω—ã URL –¥–ª—è health check API –∏ MCP —Å–µ—Ä–≤–∏—Å–æ–≤
    - `getAuthStatus()`: –£–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
  - –ü—Ä–æ–±–ª–µ–º–∞: Instance Manager –Ω–µ –º–æ–≥ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WhatsApp –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –ø–æ `localhost:4033`
  - –†–µ—à–µ–Ω–∏–µ: –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –≤ —Å–µ—Ç–∏ `wweb-network` –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –ø–æ –∏–º–µ–Ω–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

### Fixed
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ 404 –≤ Instance Monitor Service –¥–ª—è Telegram –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
  - –§–∞–π–ª: `src/instance-manager/services/instance-monitor.service.ts`
  - –ò–∑–º–µ–Ω–µ–Ω endpoint –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å `/api/v1/status` –Ω–∞ `/api/v1/telegram/status`
  - –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö: "Cannot GET /api/v1/status" –∏ "Request failed with status code 404"
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É–±–ª–∏—á–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è Telegram status endpoints –≤ middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - –§–∞–π–ª: `src/main.ts` 
  - –î–æ–±–∞–≤–ª–µ–Ω—ã `/api/v1/telegram/status` –∏ `/api/v1/telegram/health` –≤ —Å–ø–∏—Å–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π
  - –ü–æ–∑–≤–æ–ª—è–µ—Ç Instance Monitor –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –±–µ–∑ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## [v0.2.5] - 2025-01-28 - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### ü§ñ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ **Agno Integration**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∞–≥–µ–Ω—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É
- ‚úÖ **AI –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞**: –í—Å–µ –æ—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ ai.messages –∫–∞–∫ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–æ–ª—è `agno_enable` –∏ `agent_id` –≤ –ë–î
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ WhatsApp –∏ Telegram**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±–æ–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- **src/services/agno-integration.service.ts** - –°–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è
- **src/whatsapp-client.ts** - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª agno: –∑–∞–ø—Ä–æ—Å ‚Üí –æ—Ç–≤–µ—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **src/providers/telegram-provider.ts** - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª agno: –∑–∞–ø—Ä–æ—Å ‚Üí –æ—Ç–≤–µ—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **src/config/index.ts** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- **src/types.ts** - –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å AgnoConfig –≤ AppConfig
- **docker-compose.yml** - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- **env.example** - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –ê–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
AGNO_API_BASE_URL=http://localhost:8000    # URL –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
AGNO_API_TIMEOUT=10000                     # –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (–º—Å)
AGNO_ENABLED=false                         # –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
```

### üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã
1. **–í—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –ø–æ—Å—Ç—É–ø–∞–µ—Ç –≤ WhatsApp/Telegram
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ë–î –ø–æ `instance_id`
3. **–£—Å–ª–æ–≤–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏**: `agno_enable = true` AND `agent_id IS NOT NULL`
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∞–≥–µ–Ω—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É**: `POST /v1/agents/{agent_id}/runs`
5. **–ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ –Ω–∞–ª–∏—á–∏—è message
6. **–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**: –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω—ã–π —á–∞—Ç
7. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î**: –û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (`is_from_me = true`)

### üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É**: –û—à–∏–±–∫–∏ –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ webhook –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã –∏ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- **–¢–∞–π–º–∞—É—Ç—ã**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π

### üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –∏–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ `007_add_agent_user_agno_fields.sql`:
- **agent_id**: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–≥–µ–Ω—Ç–∞ –¥–ª—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **agno_enable**: –§–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```sql
-- –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∏–Ω—Å—Ç–∞–Ω—Å–∞
UPDATE ai.message_instances 
SET agent_id = 'test-agent-123', agno_enable = true 
WHERE id = 'your-instance-id';

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞ –≤ –ë–î
SELECT * FROM ai.messages 
WHERE instance_id = 'your-instance-id' 
  AND is_from_me = true 
ORDER BY created_at DESC LIMIT 5;
```

### üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.example .env
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å AGNO_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

# 2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down && docker-compose up -d --build

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs wweb-mcp-instance-manager-1 -f | grep -i agno
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## [Unreleased] - 2025-05-28

### Added
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ stream —Ä–µ–∂–∏–º–∞ –¥–ª—è Agno –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `stream` –≤ —Ç–∞–±–ª–∏—Ü—É `ai.message_instances` (–º–∏–≥—Ä–∞—Ü–∏—è `008_add_stream_field.sql`)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `user_id` –∏ `session_id` –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ Agno API
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `stream` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏ `Content-Type`

### Changed
- **src/services/agno-integration.service.ts**
  - –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoConfig` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª–µ–π `stream` –∏ `userId`
  - –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoApiRequest` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª–µ–π `user_id` –∏ `session_id`
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Agno API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:
    - `stream=false`: JSON –æ—Ç–≤–µ—Ç —Å `Content-Type: application/json`
    - `stream=true`: SSE –æ—Ç–≤–µ—Ç —Å `Content-Type: text/event-stream`
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤

- **src/whatsapp-client.ts**
  - –û–±–Ω–æ–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `sendToAgent` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Agno

- **src/providers/telegram-provider.ts**
  - –û–±–Ω–æ–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `sendToAgent` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Agno

### Fixed
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Agno API**
  - –†–∞–Ω–µ–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –æ—Ç–≤–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `text/event-stream`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `stream`
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Database
- **db/migrations/versions/008_add_stream_field.sql**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `stream BOOLEAN DEFAULT FALSE` –≤ —Ç–∞–±–ª–∏—Ü—É `ai.message_instances`
  - –°–æ–∑–¥–∞–Ω –∏–Ω–¥–µ–∫—Å `idx_message_instances_stream` –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ–ª—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### Technical Details
- **–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ Agno API:**
  ```json
  {
    "message": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è",
    "stream": true/false,
    "user_id": "user_id –∏–∑ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏–Ω—Å—Ç–∞–Ω—Å–∞",
    "session_id": "user_id –∏–∑ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏–Ω—Å—Ç–∞–Ω—Å–∞"
  }
  ```

- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤:**
  - `stream=false`: –û—Ç–≤–µ—Ç –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ, –ø–∞—Ä—Å–∏—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞
  - `stream=true`: –û—Ç–≤–µ—Ç –≤ SSE —Ñ–æ—Ä–º–∞—Ç–µ, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ—Ç–æ–∫

## [Unreleased] - 2025-01-28 - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞

### üìö –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

#### –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π README.md
- ‚úÖ **–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**: –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ö–µ–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è macOS –∏ Linux
- ‚úÖ **Development –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- ‚úÖ **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –≤—Å–µ–º endpoints
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ unit, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º –∏ E2E —Ç–µ—Å—Ç–∞–º
- ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫**: –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
```
üìÅ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
‚îú‚îÄ‚îÄ README.md                    # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–Ω–æ–≤–∞—è)
‚îú‚îÄ‚îÄ FINAL_README.md             # –ü—Ä–µ–¥—ã–¥—É—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞)
‚îú‚îÄ‚îÄ TESTING_GUIDE_NEW.md        # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
‚îú‚îÄ‚îÄ CHANGELOG.md                # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îî‚îÄ‚îÄ env.* —Ñ–∞–π–ª—ã                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥
```

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

#### env.development - macOS/Colima –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **Docker Socket**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏ Colima
- ‚úÖ **Database**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ host.docker.internal  
- ‚úÖ **Logging**: DEBUG —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ **Hot Reload**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **AI Integration**: –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è dev

#### env.production - Linux Server –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è  
- ‚úÖ **Security**: –®–∞–±–ª–æ–Ω—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ **SSL**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è HTTPS
- ‚úÖ **Performance**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è production
- ‚úÖ **Monitoring**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–æ–≤
- ‚úÖ **Paths**: –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

### üöÄ –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

#### start-dev.sh - Development –∑–∞–ø—É—Å–∫
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Docker, Node.js, Colima
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è .env —Ñ–∞–π–ª–∞
- ‚úÖ **Docker Socket**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **Database Check**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ PostgreSQL
- ‚úÖ **Hot Reload**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ TypeScript watch
- ‚úÖ **Status Check**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ **Helpful Info**: –í—ã–≤–æ–¥ –≤—Å–µ—Ö –Ω—É–∂–Ω—ã—Ö URL –∏ –∫–æ–º–∞–Ω–¥

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—É—Ç—å Docker socket –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
USER_HOME=$(eval echo ~$USER)
sed -i '' "s|/Users/akhanbakhitov|$USER_HOME|g" .env

# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
if ! docker ps > /dev/null 2>&1; then
    echo "‚ùå Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω. –î–ª—è macOS –∑–∞–ø—É—Å—Ç–∏—Ç–µ Colima:"
    echo "colima start"
    exit 1
fi
```

#### start-prod.sh - Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- ‚úÖ **Security Validation**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π –∏ –¥–æ–º–µ–Ω–æ–≤
- ‚úÖ **SSL Management**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ **Database Backup**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ **Service Checks**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ **Health Monitoring**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ endpoints
- ‚úÖ **Production Tips**: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
if grep -q "CHANGE_ME" .env; then
    echo "‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!"
    exit 1
fi

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ backup
BACKUP_FILE="backup_$(date +%Y%m%d_%H%M%S).sql"
docker exec postgres_container pg_dump -U ai ai > "$BACKUP_FILE"
```

### üõ†Ô∏è –£–ª—É—á—à–µ–Ω–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

#### Hot Reload —É–ª—É—á—à–µ–Ω–∏—è
- ‚úÖ **Volume Mapping**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ **TypeScript Watch**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞
- ‚úÖ **Container Restart**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

#### dev-watch.sh –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ **–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ **–ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –í—ã–≤–æ–¥ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö URL –∏ –∫–æ–º–∞–Ω–¥
- ‚úÖ **Graceful Shutdown**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    WWEB-MCP –°–ò–°–¢–ï–ú–ê                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üéØ Instance Manager (–ü–æ—Ä—Ç 3000)                           ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Docker Service (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Database Service (PostgreSQL)                          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Health Monitoring                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üì± WhatsApp Instances (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã 3001-7999)      ‚îÇ
‚îÇ  üì± Telegram Instances (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã 4001-8999)      ‚îÇ
‚îÇ  üß† MCP Server (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã
| –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ | –≠–Ω—Ç—Ä–∏–ø–æ–∏–Ω—Ç | –ü–æ—Ä—Ç |
|-------|----------|------------|------|
| **Instance Manager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ | `main-instance-manager.js` | 3000 (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) |
| **WhatsApp API** | Standalone WhatsApp API | `main.js -m whatsapp-api` | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |
| **Telegram API** | Standalone Telegram API | `main.js -m telegram-api` | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |
| **MCP Server** | AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | `main.js -m mcp` | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |

### üîß –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ –ø—Ä–∞–≤–∞
- ‚úÖ `start-dev.sh` - –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ `start-prod.sh` - –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã  
- ‚úÖ `dev-watch.sh` - –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ `install.sh` - –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ/—Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `README.md` - –Ω–æ–≤–∞—è –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- `env.development` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (macOS/Colima)
- `env.production` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è production (Linux)
- `start-dev.sh` - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ development –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `start-prod.sh` - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ production –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫**: –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ä–µ–¥—ã
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã**: –û—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è macOS –∏ Linux
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: –ü–æ—à–∞–≥–æ–≤—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ **Troubleshooting**: –†–µ—à–µ–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫**: –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö endpoints

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–∫—Ä–∏–ø—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## [Unreleased] - 2025-06-01 - üåê –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase Cloud —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### üéâ –ú–ò–ì–†–ê–¶–ò–Ø –ù–ê SUPABASE –ó–ê–í–ï–†–®–ï–ù–ê!

#### –ü–µ—Ä–µ—Ö–æ–¥ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL –Ω–∞ Supabase Cloud
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: –õ–æ–∫–∞–ª—å–Ω–∞—è PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–¶–µ–ª—å**: Supabase Cloud –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- **–°—Ö–µ–º–∞**: `public` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–ª—è Supabase) ‚úÖ
- **SSL**: –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π ‚úÖ
- **Status**: PRODUCTION READY ‚úÖ

### üîó –¢–∏–ø—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ Supabase

#### 1. –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (Development)
- **URL**: `postgresql://postgres:Ginifi51!@db.wyehpfzafbjfvyjzgjss.supabase.co:5432/postgres`
- **–ü–æ—Ä—Ç**: 5432
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –æ—Ç–ª–∞–¥–∫–∞
- **–§–∞–π–ª**: `env.development`

#### 2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (Production)
- **URL**: `postgres://postgres:Ginifi51!@db.wyehpfzafbjfvyjzgjss.supabase.co:6543/postgres`
- **–ü–æ—Ä—Ç**: 6543
- **Pool Mode**: Transaction
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–¥–∞–∫—à–µ–Ω
- **–§–∞–π–ª**: `env.production`

#### 3. –°–µ—Å—Å–∏–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (Supabase)
- **URL**: `postgresql://postgres.wyehpfzafbjfvyjzgjss:Ginifi51!@aws-0-eu-north-1.pooler.supabase.com:5432/postgres`
- **–ü–æ—Ä—Ç**: 5432
- **Pool Mode**: Session
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏
- **–§–∞–π–ª**: `env.supabase`

### üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **env.development** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
  - `DATABASE_URL=postgresql://postgres:Ginifi51!@db.wyehpfzafbjfvyjzgjss.supabase.co:5432/postgres`
  - `DATABASE_HOST=db.wyehpfzafbjfvyjzgjss.supabase.co`
  - `DATABASE_SCHEMA=public`
  - `DATABASE_SSL=true`
  - `USE_SUPABASE=true`

- **env.production** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
  - `DATABASE_URL=postgres://postgres:Ginifi51!@db.wyehpfzafbjfvyjzgjss.supabase.co:6543/postgres`
  - `DATABASE_PORT=6543`
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **env.supabase** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å–µ—Å—Å–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `DATABASE_URL=postgresql://postgres.wyehpfzafbjfvyjzgjss:Ginifi51!@aws-0-eu-north-1.pooler.supabase.com:5432/postgres`
  - `DATABASE_USER=postgres.wyehpfzafbjfvyjzgjss`
  - –°–µ—Å—Å–∏–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ pooler

#### ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **src/config/database.config.ts** - —É–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Supabase
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç `DATABASE_URL` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–ª–∞ –¥–ª—è Supabase (max: 20, timeouts: 30s)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `postgres` –≤–º–µ—Å—Ç–æ `ai`

- **src/instance-manager/config/database.config.ts** - –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
  - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –º–æ–¥—É–ª–µ–º
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–ª–∞ –¥–ª—è Supabase

#### ‚úÖ Docker Compose —Ñ–∞–π–ª—ã
- **docker-compose.yml** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ë–î
  - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–ª—É—á–∞—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `DATABASE_*`
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `USE_SUPABASE=true`
  - –ü–µ—Ä–µ–¥–∞—á–∞ SSL –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

- **docker-compose.production.yml** - —É–¥–∞–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è PostgreSQL
  - –£–±—Ä–∞–Ω —Å–µ—Ä–≤–∏—Å `postgres` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Supabase Cloud)
  - –£–±—Ä–∞–Ω volume `postgres_data`
  - –£–±—Ä–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î

#### ‚úÖ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- **src/utils/test-db-connection.ts** - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
  - –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ dotenv –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

#### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- **package.json** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ë–î
  - `test:db` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∫–æ–¥
  - `test:db:dev` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ts-node

- **start-dev.sh** - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Supabase –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase Cloud —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ PostgreSQL 17.4 –Ω–∞ aarch64-unknown-linux-gnu
- ‚úÖ –°—Ö–µ–º–∞ `public` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã `messages` –∏ `message_instances` —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- ‚úÖ –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ö–µ–º—ã –≤ Supabase
- `public` (–æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—á–∞—è —Å—Ö–µ–º–∞)
- `auth`, `extensions`, `storage` (—Å–∏—Å—Ç–µ–º–Ω—ã–µ Supabase)
- `ai` (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å—Ö–µ–º–∞ —Å –¥–∞–Ω–Ω—ã–º–∏)

#### ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ public
- `messages` - —Å–æ–æ–±—â–µ–Ω–∏—è WhatsApp/Telegram
- `message_instances` - —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤
- `users`, `agent_configs` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –î—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

### üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

| –¢–∏–ø | –•–æ—Å—Ç | –ü–æ—Ä—Ç | –†–µ–∂–∏–º | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----|------|------|-------|---------------|
| **–ü—Ä—è–º–æ–µ** | `db.wyehpfzafbjfvyjzgjss.supabase.co` | 5432 | Direct | Development |
| **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–µ** | `db.wyehpfzafbjfvyjzgjss.supabase.co` | 6543 | Transaction | Production |
| **–°–µ—Å—Å–∏–æ–Ω–Ω–æ–µ** | `aws-0-eu-north-1.pooler.supabase.com` | 5432 | Session | Special cases |

### üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

#### Development (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
```bash
cp env.development .env
npm run test:db  # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
./start-dev.sh   # –ó–∞–ø—É—Å–∫ development –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

#### Production (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
```bash
cp env.production .env
docker-compose -f docker-compose.production.yml up -d --build
```

#### Supabase (—Å–µ—Å—Å–∏–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
```bash
cp env.supabase .env
docker-compose -f docker-compose.supabase.yml up -d --build
```

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
‚úÖ **–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ Supabase Cloud**  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 3 —Ç–∏–ø–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**  
‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**  
‚úÖ **Production ready –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π**

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 1 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –ü–†–û–ô–î–ï–ù–û  
**Production**: ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

## [Unreleased] - 2025-01-06

### ‚ú® –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è Supabase Cloud

#### üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **install.sh** - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è Supabase Cloud
- **start-dev.sh** - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è development –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å Supabase
- **start-prod.sh** - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å Supabase  
- **start-instance.sh** - –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —á–µ—Ä–µ–∑ API

#### üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

**install.sh:**
- –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Cloud –≤ .env —Ñ–∞–π–ª–µ
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å DATABASE_URL
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ placeholder –∑–Ω–∞—á–µ–Ω–∏–π
- –£–ª—É—á—à–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

**start-dev.sh:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Supabase
- –í–∞–ª–∏–¥–∞—Ü–∏—è DATABASE_URL –Ω–∞ placeholder –∑–Ω–∞—á–µ–Ω–∏—è
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Instance Manager —Å retry –ª–æ–≥–∏–∫–æ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase —á–µ—Ä–µ–∑ health check
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã API –∫–æ–º–∞–Ω–¥ –¥–ª—è WhatsApp –∏ Telegram

**start-prod.sh:**
- –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ —Å Instance Manager (–±–µ–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è Supabase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î –∏ Nginx
- –£–ª—É—á—à–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è

**start-instance.sh:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Instance Manager API
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è WhatsApp –∏ Telegram –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ webhook –¥–ª—è WhatsApp
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —Å–æ–∑–¥–∞–Ω–Ω–æ–º –∏–Ω—Å—Ç–∞–Ω—Å–µ
- –ü—Ä–∏–º–µ—Ä—ã API –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç–∞–Ω—Å–æ–º

#### üåê –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Instance Manager
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Supabase –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ development, —Ç–∞–∫ –∏ production –æ–∫—Ä—É–∂–µ–Ω–∏–π

#### üìö –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ Supabase Dashboard
- –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å API –¥–ª—è WhatsApp –∏ Telegram
- –ö–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è production

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–æ–≥–∞ "Schema ai created" –Ω–∞ "Database schema initialized (using public schema)"
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ö–µ–º—É —Å `ai` –Ω–∞ `public`
- –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL

---

## [0.2.4] - 2025-01-05

### ‚ú® –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase Cloud –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## [Unreleased] - 2025-06-01 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å ESLint

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### ESLint –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **package.json** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã ESLint –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
  - –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã `lint` –∏ `lint:fix` –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - –ö–æ–º–∞–Ω–¥—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `echo 'ESLint disabled'` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã devDependencies –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π ESLint v8

- ‚úÖ **eslint.config.js** - —É–¥–∞–ª–µ–Ω —Ñ–∞–π–ª –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ESLint v9
  - –§–∞–π–ª –±—ã–ª –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π ESLint v8.57.0
  - –í–æ–∑–≤—Ä–∞—Ç –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é `.eslintrc.js` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

- ‚úÖ **.eslintrc.js** - —É–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ESLint
  - –£–±—Ä–∞–Ω—ã TypeScript –ø–ª–∞–≥–∏–Ω—ã –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - –°–æ–∑–¥–∞–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ignore patterns

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **–ö–æ–º–∞–Ω–¥–∞ `npm run lint:fix` —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫**
- ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ESLint**
- ‚úÖ **–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–†–ò–ú–ï–ù–ï–ù–û** - ESLint –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

## [0.2.5] - 2025-06-01

### Added
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å npm –Ω–∞ pnpm –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- –ù–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ESLint —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `eslint.config.js` (flat config)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript ESLint v8.26.1
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Changed
- **BREAKING**: –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç pnpm –≤–º–µ—Å—Ç–æ npm
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:
  - `install.sh` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pnpm –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç pnpm-lock.yaml
  - `start-dev.sh` - –∫–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ pnpm
  - `start-prod.sh` - production —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pnpm
  - `dev-watch.sh` - watch —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ pnpm
  - `deploy-production.sh` - production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ pnpm
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ESLint:
  - –£–¥–∞–ª–µ–Ω `.eslintrc.js`
  - –î–æ–±–∞–≤–ª–µ–Ω `eslint.config.js` —Å flat config
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã lint –≤ package.json (—É–±—Ä–∞–Ω —Ñ–ª–∞–≥ --ext)
- –û–±–Ω–æ–≤–ª–µ–Ω—ã devDependencies:
  - `@typescript-eslint/eslint-plugin@^8.26.1`
  - `@typescript-eslint/parser@^8.26.1`
  - `eslint@^9.22.0`
  - `eslint-config-prettier@^10.1.1`
  - `eslint-plugin-jest@^28.11.0`
  - `eslint-plugin-prettier@^5.2.3`
  - `typescript-eslint@^8.26.1`

### Fixed
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Ç–∏–ø–æ–≤ TypeScript
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (769 –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `pnpm ci` –Ω–∞ `pnpm install --frozen-lockfile`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã ESLint –¥–ª—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (—É–±—Ä–∞–Ω —Ñ–ª–∞–≥ --ext)

### Technical Details
- –í—Å–µ —Ç–∏–ø—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ pnpm
- ESLint —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π flat config —Å–∏—Å—Ç–µ–º–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Prettier –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ ESLint
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Jest –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Migration Guide
–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pnpm: `npm install -g pnpm`
2. –£–¥–∞–ª–∏—Ç–µ node_modules –∏ package-lock.json: `rm -rf node_modules package-lock.json`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pnpm install`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–∏–Ω—Ç–µ—Ä: `pnpm run lint:fix`
5. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `pnpm run build`

## [0.2.4] - 2025-05-31

## [Unreleased] - 2025-01-28 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ Colima —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

#### Docker –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ Instance Manager
- ‚úÖ **docker-compose.instance-manager.yml** - –¥–æ–±–∞–≤–ª–µ–Ω privileged —Ä–µ–∂–∏–º –¥–ª—è Docker –¥–æ—Å—Ç—É–ø–∞
  - –†–µ–∂–∏–º: `privileged: true`
  - Network mode: `host` –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π mapping Docker socket

#### –ü—Ä–æ–±–ª–µ–º–∞ —Å Colima –Ω–∞ macOS
- ‚ö†Ô∏è **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞**: Colima socket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ macOS
  - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `/var/run/docker.sock` —á–µ—Ä–µ–∑ Colima
  - –≠—Ç–æ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å macOS Virtualization.Framework
  - Instance Manager —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ –±–µ–∑ Docker —Ñ—É–Ω–∫—Ü–∏–π

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 1**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Desktop –≤–º–µ—Å—Ç–æ Colima
  - –ö–æ–º–∞–Ω–¥–∞: `docker context use desktop-linux`
  - Docker Desktop –ª—É—á—à–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  
- üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è 2**: –ó–∞–ø—É—Å–∫ Instance Manager –Ω–∞ —Ö–æ—Å—Ç–µ (–±–µ–∑ Docker)
  - –ö–æ–º–∞–Ω–¥–∞: `pnpm run dev:instance-manager`
  - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Docker –Ω–∞ —Ö–æ—Å—Ç–µ

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

#### –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö

## [Unreleased] - 2025-01-28 - ‚úÖ –†–ï–®–ï–ù–ò–ï: Docker –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ Colima —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### üéâ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!

#### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–π Docker –æ–±—Ä–∞–∑**: `wweb-mcp:latest` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–±—Ä–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **Instance Manager –æ–±—Ä–∞–∑**: `wweb-mcp-instance-manager:latest` —Å–æ–±—Ä–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: Colima socket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ macOS
  - Instance Manager –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Docker daemon
  - –û—à–∏–±–∫–∞: "Cannot connect to the Docker daemon at unix:///var/run/docker.sock"
  - –≠—Ç–æ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å macOS Virtualization.Framework –≤ Colima

#### ‚úÖ –†–ê–ë–û–ß–ï–ï –†–ï–®–ï–ù–ò–ï: Instance Manager –Ω–∞ —Ö–æ—Å—Ç–µ
- üéØ **–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫ Instance Manager –Ω–∞ —Ö–æ—Å—Ç–µ (–Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
  - –ö–æ–º–∞–Ω–¥–∞: `node dist/main-instance-manager.js`
  - Background: `nohup node dist/main-instance-manager.js > instance-manager.log 2>&1 &`
  - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Docker daemon –Ω–∞ —Ö–æ—Å—Ç–µ
  - –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

#### üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **Database connection**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Docker connection verified**: –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Docker
- ‚úÖ **Synced 3 instances to memory**: –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- ‚úÖ **Instance Manager API running on port 3000**: API –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–∑ –¥–æ—Å—Ç—É–ø–µ–Ω**: `wweb-mcp:latest` –≥–æ—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

#### üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
- üí° **Docker Desktop**: –õ—É—á—à–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- üí° **Linux**: –ù–∞ Linux Colima —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- üí° **TCP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –í–æ–∑–º–æ–∂–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Colima

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π macOS + Colima
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Instance Manager –Ω–∞ —Ö–æ—Å—Ç–µ** –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–ò–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ Docker Desktop** –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
3. **Linux –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º –±–µ–∑ –ø—Ä–æ–±–ª–µ–º

### üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **CHANGELOG.md** - –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
- **docker-compose.instance-manager.yml** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–†–ï–®–ï–ù–û** - Instance Manager —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ö–æ—Å—Ç–µ —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é

## [0.2.5] - 2025-01-15

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **Instance Manager API**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ª—è `token` –¥–ª—è Telegram bot token –≤–º–µ—Å—Ç–æ `api_key`
- **Database Schema**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è `account` –≤–º–µ—Å—Ç–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `phone_number`
  - –£–±—Ä–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—é `phone_number` –≤ `instance-monitor.service.ts`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `auth_status_changed` –≤ `database.service.ts`
  - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- **Database Schema**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ API —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤:
  - `agent_id` - ID –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Agno
  - `agno_enable` - —Ñ–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è Agno (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
  - `stream` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)
  - `auth_status` - —Å—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'pending')
  - `current_api_key` - —Ç–µ–∫—É—â–∏–π API –∫–ª—é—á
  - `api_key_generated_at` - –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ API –∫–ª—é—á–∞
  - `last_qr_generated_at` - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ QR –∫–æ–¥–∞
  - `account` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è WhatsApp, –∏–º—è –±–æ—Ç–∞ –¥–ª—è Telegram)
  - `whatsapp_state` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ WhatsApp
- **Telegram Provider**: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è bot token –∏–∑ –ø–æ–ª—è `token` –≤ Docker Compose –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ
- **Database Service**: –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—Å–µ—Ö –ø–æ–ª–µ–π

### üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö
- `src/instance-manager/config/database.config.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ CREATE_TABLE_SQL
- `src/instance-manager/api/v1/instances.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- `src/instance-manager/services/database.service.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å –ë–î
- `src/instance-manager/models/instance.model.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MessageInstance
- `src/instance-manager/utils/docker-compose.utils.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ Telegram token
- `src/instance-manager/services/instance-monitor.service.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è account
- `TESTING_GUIDE_NEW.md` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è Telegram —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

## [Unreleased] - 2025-01-15

### Changed
- **env.production**: –ó–∞–º–µ–Ω–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å `DATABASE_PASSWORD=Ginifi51!` –Ω–∞ placeholder `DATABASE_PASSWORD=YOUR_PASSWORD` —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º-–ø—Ä–∏–º–µ—Ä–æ–º –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **start-prod.sh**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `DATABASE_PASSWORD` –Ω–∞ placeholder –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ —Å –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- **start-dev.sh**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `DATABASE_PASSWORD` –Ω–∞ placeholder –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ —Å –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏

### Security
- –£–¥–∞–ª–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–∑ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `env.production` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –∑–∞–ø—É—Å–∫–∞

### Documentation
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø–∞—Ä–æ–ª—è –≤ `env.production` –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –£–ª—É—á—à–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –∑–∞–ø—É—Å–∫–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è –∑–∞–º–µ–Ω—ã

## [–ù–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ] - 2025-06-02

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã `start-prod.sh`, `update-production.sh` –∏ `start-dev.sh` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤–∫–ª—é—á–∞—è dev) –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π TypeScript –≤–æ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
  - –í production —Å–∫—Ä–∏–ø—Ç–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

- **tsconfig.json**: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ –≤ production
  - –û—Ç–∫–ª—é—á–µ–Ω—ã —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `noImplicitAny` –∏ `noUnusedParameters` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏
  - –ò—Å–∫–ª—é—á–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏–∑ —Å–±–æ—Ä–∫–∏
  - –£–¥–∞–ª–µ–Ω –ª–∏—à–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä `types: ["node"]`

### –£–ª—É—á—à–µ–Ω–æ  
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å macOS**: –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ macOS —Å —É—á–µ—Ç–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π BSD sed
- **–ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è production —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —Å–±–æ—Ä–∫–∏

## [New] - 2025-01-29

### üîÑ Database Architecture Refactoring

#### Added
- **Multi-Provider Service** (`src/services/multi-provider.service.ts`) - Unified service for managing all API-based messenger providers on a single port
- **Provider Database Service** (`src/services/provider-database.service.ts`) - Service for working with separated provider tables
- **Database Migration** (`db/migrations/versions/001_split_provider_tables.sql`) - Splits message_instances into provider-specific tables
- **Provider-specific tables**:
  - `whatsappweb_instances` (renamed from message_instances)
  - `telegram_instances` 
  - `whatsapp_official_instances`
  - `facebook_messenger_instances`
  - `instagram_instances`
  - `slack_instances`
  - `discord_instances`
- **New provider support** in types for: WhatsApp Official API, Facebook Messenger, Instagram, Slack, Discord

#### Changed
- Updated `MessengerProvider` type to include all new providers
- Enhanced webhook architecture to support multiple providers on single port
- Improved resource efficiency by consolidating API-based providers

#### Architecture Benefits
- **Resource Optimization**: API-based providers (Telegram, WhatsApp Official, etc.) now run on single port
- **Better Separation**: Each provider has dedicated table with specific fields
- **Scalability**: Thousands of API clients can run on single server instance
- **Maintainability**: Clear separation between browser-based (WhatsApp Web) and API-based providers

#### Migration Instructions
To apply the database migration:
```bash
cd db/migrations
psql -d your_database -f versions/001_split_provider_tables.sql
```

To rollback:
```bash
cd db/migrations  
psql -d your_database -f versions/001_split_provider_tables_rollback.sql
```

#### Breaking Changes
- `message_instances` table renamed to `whatsappweb_instances`
- New provider instances should use provider-specific tables
- Legacy code referencing `message_instances` needs to be updated

#### Next Steps
This prepares the foundation for implementing the complete multi-provider connector system with best-in-class libraries for each platform.

## [2024-01-XX] - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã API –∫–ª—é—á–µ–π

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è (Breaking Changes)
- **API –∫–ª—é—á–∏**: –£–±—Ä–∞–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö API –∫–ª—é—á–µ–π, —Ç–µ–ø–µ—Ä—å `api_key` –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–µ–Ω `instance_id`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ `current_api_key` –∏–∑ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- **–°—Ö–µ–º–∞ –ë–î**: –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `ai.message_instances` —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- **API**: Endpoint `/api/v1/instances/:id/current-api-key` –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `/api/v1/instances/:id/api-key`

### üöÄ –£–ª—É—á—à–µ–Ω–∏—è
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å API –∫–ª—é—á–∞–º–∏ - –æ–¥–∏–Ω —Å—Ç–∞—Ç–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Å
- –£–±—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —Ä–æ—Ç–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
- –î–ª—è —Å–º–µ–Ω—ã API –∫–ª—é—á–∞ —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç —É–ø—Ä–æ—â–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏

## [Unreleased] - 2025-01-29

### Changed
- **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Agno API –¥–æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ Playground API**
  - –ò–∑–º–µ–Ω–µ–Ω URL –∑–∞–ø—Ä–æ—Å–∞ —Å `/v1/agents/{agent_id}/runs` –Ω–∞ `/v1/playground/agents/{agent_id}/runs`
  - –ò–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å `application/json` –Ω–∞ `multipart/form-data`
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor=false` –≤ –∑–∞–ø—Ä–æ—Å—ã –∫ Agno
  - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ JSON —Å –ø–æ–ª–µ–º `content`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `session_id` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `run_id` –∏ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno

### Added
- **src/services/agno-integration.service.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `FormData` –¥–ª—è multipart –∑–∞–ø—Ä–æ—Å–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `sessionId` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoConfig`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `content`, `run_id`, `agent_id`, `session_id`, `metrics` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoResponse`
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `monitor` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AgnoApiRequest`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è `session_id` –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ —Å –ø–æ–ª–µ–º `content`

- **src/whatsapp-client.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è `content` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno
  - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `session_id` –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `run_id` –∏ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno

- **src/providers/telegram-provider.ts**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è `content` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno
  - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `session_id` –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `run_id` –∏ `session_id` –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ Agno

### Dependencies
- **–î–æ–±–∞–≤–ª–µ–Ω –ø–∞–∫–µ—Ç `form-data`** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ multipart/form-data –∑–∞–ø—Ä–æ—Å–æ–≤
- **–î–æ–±–∞–≤–ª–µ–Ω –ø–∞–∫–µ—Ç `@types/form-data`** –¥–ª—è TypeScript —Ç–∏–ø–æ–≤

### Technical Details
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Agno —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π Playground API
- –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ multipart/form-data —Å –ø–æ–ª—è–º–∏:
  - `message` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
  - `stream` - —Ä–µ–∂–∏–º –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
  - `monitor` - —Ä–µ–∂–∏–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–≤—Å–µ–≥–¥–∞ false)
  - `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `session_id` - ID —Å–µ—Å—Å–∏–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `content` —Å —Ç–µ–∫—Å—Ç–æ–º –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø–æ–ª–µ–º `message` –≤ –æ—Ç–≤–µ—Ç–∞—Ö

## [Unreleased] - 2025-01-30 üîß DATABASE FIELD FILTERING FIX

### üîß Bug Fixes - Database Field Filtering

#### Instance Update Protection
- **FIXED**: `src/instance-manager/services/database.service.ts` - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π –≤ –º–µ—Ç–æ–¥–µ updateInstance
- **FIXED**: –¢–µ–ø–µ—Ä—å –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, agent_id) –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- **ADDED**: –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ "column does not exist"
- **ENHANCED**: `src/instance-manager/models/instance.model.ts` - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ agno_config –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MessageInstance

#### Error Prevention
- **FIXED**: –û—à–∏–±–∫–∞ "column agent_id of relation message_instances does not exist" –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- **ADDED**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
- **ENHANCED**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ Object.entries

### üìä Database Schema Consistency
- ‚úÖ –í—Å–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è (agent_id, agno_enable, stream, model, agno_url) —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è
- ‚úÖ –ü–æ–ª–µ agno_config –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Agno
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ JSON —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –ø–æ–ª—è–º–∏

---

## [Unreleased] - 2025-06-19 - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–≥–æ–≤ Instance Manager

### üöÄ –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: API –¥–ª—è –ª–æ–≥–æ–≤ Instance Manager

#### –ü—Ä–æ–±–ª–µ–º–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª API –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º —Å–∞–º–æ–≥–æ Instance Manager –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –õ–æ–≥–∏ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ Docker logs
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –º–æ–≥ –ø–æ–ª—É—á–∞—Ç—å –ª–æ–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### –†–µ—à–µ–Ω–∏–µ

##### üìÅ **src/logger.ts** - –£–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **File Transport**: –î–æ–±–∞–≤–ª–µ–Ω winston file transport –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ `logs/instance-manager.log`
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ñ–∞–π–ª –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤ Docker –∏ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ –Ω–∞ —Ö–æ—Å—Ç–µ
- ‚úÖ **–†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è (100MB, 5 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ `logs/` –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç

##### üìÅ **src/instance-manager/services/logs.service.ts** - –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–≥–∞–º–∏
- ‚úÖ **LogsService**: –°–µ—Ä–≤–∏—Å –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ª–æ–≥–æ–≤
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥**: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —É—Ä–æ–≤–Ω—é –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ–≥–æ–≤
- ‚úÖ **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–º–µ—Ä–µ —Ñ–∞–π–ª–∞, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

##### üìÅ **src/instance-manager/api/v1/logs.ts** - –ù–æ–≤—ã–µ API endpoints
- ‚úÖ **GET /api/v1/logs**: –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ **GET /api/v1/logs/latest**: –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ (–¥–ª—è real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
- ‚úÖ **GET /api/v1/logs/stats**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **GET /api/v1/logs/health**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ª–æ–≥ —Ñ–∞–π–ª–∞

##### üìÅ **src/instance-manager/api/v1/index.ts** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞
- ‚úÖ **–†–æ—É—Ç–∏–Ω–≥**: –î–æ–±–∞–≤–ª–µ–Ω `/logs` —Ä–æ—É—Ç–µ—Ä –≤ –æ—Å–Ω–æ–≤–Ω–æ–π API v1
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ endpoints –≤ –±–∞–∑–æ–≤–æ–º –æ—Ç–≤–µ—Ç–µ

#### üéØ API Endpoints

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 –ª–æ–≥–æ–≤
GET /api/v1/logs?tail=100

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é
GET /api/v1/logs?level=error&tail=50

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ –¥–ª—è polling
GET /api/v1/logs/latest?lines=25

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤
GET /api/v1/logs/stats?lines=1000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
GET /api/v1/logs/health
```

#### üìä –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ API

```json
{
  "success": true,
  "data": {
    "logs": [
      {
        "timestamp": "2025-06-19 11:47:25:4725",
        "level": "info",
        "message": "üöÄ Starting Instance Manager...",
        "raw": "2025-06-19 11:47:25:4725 info: üöÄ Starting Instance Manager..."
      }
    ],
    "total_lines": 150,
    "file_size": 25600,
    "file_path": "/app/logs/instance-manager.log",
    "last_modified": "2025-06-19T11:47:25.000Z"
  },
  "metadata": {
    "requested_tail": 100,
    "requested_level": "all",
    "timestamp": "2025-06-19T11:50:00.000Z"
  }
}
```

#### üîÑ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:
- ‚úÖ –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (`DOCKER_CONTAINER=true`)
- ‚úÖ –ü—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ instance manager –Ω–∞ —Ö–æ—Å—Ç–µ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ `main-instance-manager`)
- ‚úÖ –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `INSTANCE_MANAGER_MODE=true`

#### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **Rate Limiting**: –ü—Ä–∏–º–µ–Ω–µ–Ω lenient rate limit –¥–ª—è –≤—Å–µ—Ö endpoints
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (tail: 1-10000, lines: 1-1000)
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **Memory Safe**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

### üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/logger.ts` - —É–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å file transport
- `src/instance-manager/services/logs.service.ts` - –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–≥–∞–º–∏
- `src/instance-manager/api/v1/logs.ts` - –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä —Å API endpoints
- `src/instance-manager/api/v1/index.ts` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ logs —Ä–æ—É—Ç–µ—Ä–∞

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ **API –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º**: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –ª–æ–≥–∏ Instance Manager
- ‚úÖ **Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Endpoints –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤
- ‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ Docker, —Ç–∞–∫ –∏ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** - API endpoints –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## [Migration 010] - 2025-01-15

### üöÄ MAJOR FEATURE: Migration user_id ‚Üí company_id

#### ‚ú® Added
- **SQL Migration 010**: `db/migrations/versions/010_rename_user_id_to_company_id.sql`
  - Safe conditional migration with transaction support
  - Handles all provider tables (whatsappweb, telegram, etc.)
  - Updates indexes and comments

- **Migration Scripts**:
  - `scripts/apply-migration-010.sh` - Apply database migration
  - `scripts/cleanup-all-instances.sh` - Full container cleanup
  - `scripts/full-migration-010.sh` - Complete automated migration

- **Documentation**: `MIGRATION_010_SUMMARY.md` - Complete migration guide

#### üîÑ Changed
- **API Endpoints**: All endpoints now use `company_id` instead of `user_id`
  - `POST /api/v1/instances` - Request body uses `company_id`
  - `GET /api/v1/instances` - Filter parameter uses `company_id`
  
- **Database Schema**: 
  - Column `user_id` ‚Üí `company_id` in `message_instances` table
  - Index `idx_message_instances_user_id` ‚Üí `idx_message_instances_company_id`
  - All provider tables updated conditionally

- **Code Files Updated** (17 files):
  - `src/instance-manager/models/instance.model.ts` - Interface updated
  - `src/instance-manager/api/v1/instances.ts` - API endpoints
  - `src/instance-manager/services/database.service.ts` - Database operations
  - `src/services/agno-integration.service.ts` - Agno API integration
  - `src/instance-manager/utils/docker-compose.utils.ts` - Docker labels
  - `src/instance-manager/utils/naming.utils.ts` - Container naming
  - And 11 other core files

- **Scripts Updated** (3 files):
  - `start-dev.sh` - Development curl commands
  - `get-ports.sh` - Port listing display
  - `cleanup-unused-instances.sh` - Instance cleanup display

- **Documentation Updated** (2 files):
  - `docs/INSTANCE_MANAGER_API.md` - API examples
  - `FINAL_README.md` - Usage examples

#### üîß Technical Details
- **Agno Integration**: Maintains backward compatibility
  - Internally uses `company_id` from database
  - Still sends `user_id` to Agno API for compatibility
  - Session ID generation unchanged

- **Docker Labels**: Container labels updated
  - New containers use `company_id` values
  - Label key remains `wweb.instance.user_id` for compatibility

- **Memory Management**: In-memory representation
  - Database uses `company_id`
  - Memory layer maps to `user_id` for internal compatibility

#### ‚ö†Ô∏è Breaking Changes
- **API Breaking Change**: Request/response format changed
  ```diff
  - {"user_id": "company-123", "provider": "whatsappweb"}
  + {"company_id": "company-123", "provider": "whatsappweb"}
  ```

- **Container Recreation Required**: 
  - All existing Docker containers must be removed
  - New containers will have updated labels
  - WhatsApp re-authentication required

#### üß™ Migration Path
1. **Automated** (Recommended):
   ```bash
   ./scripts/full-migration-010.sh
   ```

2. **Manual** (Step-by-step):
   ```bash
   ./scripts/cleanup-all-instances.sh
   ./scripts/apply-migration-010.sh  
   docker-compose down && docker-compose up -d --build
   ```

#### üìä Statistics
- **Files Changed**: 22 files
- **New Files**: 4 migration scripts
- **Lines Added**: 560+
- **Lines Modified**: 55+

---

## [Unreleased]

### Fixed
- **db/migrations/versions/011_add_company_id_indexes.sql**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è - –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ `status` –Ω–∞ `auth_status`, —É–±—Ä–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **src/instance-manager/api/v1/company-messages.ts**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/v1/company/:companyId/instances` - –∑–∞–º–µ–Ω–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `status` –Ω–∞ `auth_status`
- **src/instance-manager/services/database.service.ts**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ `auth_status` –≤ –º–µ—Ç–æ–¥ `getAllInstances()`
- **docs/ENDPOINTS_INSTANCES_MESSAGES.md**: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã `message_instances` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î
